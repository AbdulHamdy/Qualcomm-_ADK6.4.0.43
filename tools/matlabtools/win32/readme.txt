Kalimba Matlab Tools
--------------------

Introduction
------------

A set of tools have been developed to enable a level of integration of Matlab and
the Kalimba DSP. These tools are able to connect to a Kalimba DSP over a debug transport
and extract symbol information from ELF or KLO files generated by the Kalimba toolchain.
They can then perform various debug actions, such as querying the state of the processor, 
reading and writing variables in memory, produce stack traces, etc.

Supported Matlab versions
-------------------------

2009a - 2016b inclusive, 32- and 64-bit where applicable.
Newer versions are likely to work, but have not been tested.

Setup
-----

1. Matlab path

    To use these tools, the directory this file resides in must be added to the Matlab path via
    the "Set Path" command in Matlab. Typically the tools will be located in:

    [SDK install directory]\tools\matlab\win32
    or
    [SDK install directory]\tools\matlab\win64

    for 32- and 64-bit variants of the tools, respectively. Ensure that the tools chosen match
    the Matlab installation type.
    
2. Test
    
    To test that everything has been set up correctly, run 
    
        >> kalspi
    
    A dialog box should appear, prompting you to connect to an attached Kalimba DSP.
    
3. Troubleshooting

    If the kalspi function is not found, try refreshing the Matlab path:-

       >> rehash path
       
       and then and re-running kalspi.
       
Instructions
------------

Note that more complete help on the various functions outlined below is available via the normal 
Matlab help facility. For example,

    >> help(kalloadsym)
    
KALSPI enumerates attached Kalimba cores via available debug transports, and allows
connection to a particular Kalimba core.

KALLOADSYM loads debugging symbols from a specified ELF or KLO file.

KALSYMFIND searches through the loaded symbol table with the wild cards * and ?
having their usual meanings. These searches are all case INSENSITIVE.

KALREADVAL reads the value of a variable from the Kalimba.

KALWRITEVAL writes the value of a variable to the Kalimba.

KALRUNNING returns and/or modifies the state of the Kalimba - running/stopped.

Other, lower-level, functions exist, for example KALVARPRS and KXS. KALVARPRS is used to
store the symbol table in Matlab. This function should never be called by the user -- it is
called by the other routines to return the currently stored symbol table. However, if users 
wish to develop their own functions which require access to the symbol table, it is available 
through this function. KXS provides direct access to various C++ functions; again, this is 
not intended to be used directly, but is available for new functions to be developed against.

KALPCPROFILER returns the usage statistics of the MODULES for the current Kalimba
application. This is done by polling the program counter of Kalimba DSP.

KALMODNAME returns the module name, text file and line number of the
corresponding program counter location.

NOTE: where capital letters are used above it is for clarity, the Matlab functions
should be written in lower case on the command line.
