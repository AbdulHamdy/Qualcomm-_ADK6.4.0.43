<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OS: trap_api_message.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OS
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('da/df7/trap__api__message_8c.html','../../');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">trap_api_message.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../d1/d2b/trap__api__private_8h_source.html">trap_api/trap_api_private.h</a>&quot;</code><br />
<code>#include &lt;message.h&gt;</code><br />
<code>#include &lt;sink.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../d8/ddb/pmalloc_8h_source.html">pmalloc/pmalloc.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../df/d1f/panic_8h_source.html">panic/panic.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/da7/assert_8h_source.html">assert.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../de/d69/hydra__macros_8h_source.html">hydra/hydra_macros.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../da/d67/hydra__log_8h_source.html">hydra_log/hydra_log.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d9/d24/ipc_8h_source.html">ipc/ipc.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../df/d92/longtimer_8h_source.html">longtimer/longtimer.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d7/d00/sched_8h_source.html">sched/sched.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/dac/io_8h_source.html">io/io.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a884357985340ad08eeccc4e36b105183"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df7/trap__api__message_8c.html#a884357985340ad08eeccc4e36b105183">IO_DEFS_MODULE_K32_CORE</a></td></tr>
<tr class="separator:a884357985340ad08eeccc4e36b105183"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac13b2b2d55bd945efb5ecb314c85bc21"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df7/trap__api__message_8c.html#ac13b2b2d55bd945efb5ecb314c85bc21">IO_DEFS_MODULE_K32_DEBUG</a></td></tr>
<tr class="separator:ac13b2b2d55bd945efb5ecb314c85bc21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cc8e25137086fea4c5cc9184a67a300"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df7/trap__api__message_8c.html#a3cc8e25137086fea4c5cc9184a67a300">IO_DEFS_MODULE_K32_MISC</a></td></tr>
<tr class="separator:a3cc8e25137086fea4c5cc9184a67a300"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5671d5634b37c472d9e5af87d334c9b2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df7/trap__api__message_8c.html#a5671d5634b37c472d9e5af87d334c9b2">VM_DIFF</a>(t,  u)&#160;&#160;&#160;(((int32)(t)) - ((int32)(u)))</td></tr>
<tr class="memdesc:a5671d5634b37c472d9e5af87d334c9b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Macro for comparing times.  <a href="#a5671d5634b37c472d9e5af87d334c9b2">More...</a><br /></td></tr>
<tr class="separator:a5671d5634b37c472d9e5af87d334c9b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae75edda29489fc5a1122ea8d2f987fe"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df7/trap__api__message_8c.html#aae75edda29489fc5a1122ea8d2f987fe">vm_debug_message_send</a>(x)</td></tr>
<tr class="memdesc:aae75edda29489fc5a1122ea8d2f987fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Not currently used.  <a href="#aae75edda29489fc5a1122ea8d2f987fe">More...</a><br /></td></tr>
<tr class="separator:aae75edda29489fc5a1122ea8d2f987fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbb95bd926e61a65888501f8800e8174"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df7/trap__api__message_8c.html#abbb95bd926e61a65888501f8800e8174">vm_debug_message_cancel</a>(x)</td></tr>
<tr class="memdesc:abbb95bd926e61a65888501f8800e8174"><td class="mdescLeft">&#160;</td><td class="mdescRight">Not currently used.  <a href="#abbb95bd926e61a65888501f8800e8174">More...</a><br /></td></tr>
<tr class="separator:abbb95bd926e61a65888501f8800e8174"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:adf764cbdea00d65edcd07bb9953ad2b7"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="../../da/df7/trap__api__message_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a440601069f0f9a6e6b39782e4cab2171">VM_MSG_STANDARD_RUN</a>, 
<a class="el" href="../../da/df7/trap__api__message_8c.html#adf764cbdea00d65edcd07bb9953ad2b7aad6f2a0bda2b146fa494012825aa7233">VM_MSG_SIMPLE_EVENT</a>
 }</td></tr>
<tr class="memdesc:adf764cbdea00d65edcd07bb9953ad2b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Messages sent to the api message task to reschedule it in the background, either because a wait has expired, an enabled event has been triggered, host comms has completed, or a connection is dirty.  <a href="../../da/df7/trap__api__message_8c.html#adf764cbdea00d65edcd07bb9953ad2b7">More...</a><br /></td></tr>
<tr class="separator:adf764cbdea00d65edcd07bb9953ad2b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a985d4533500ceaf531c9e03b0d7d6f65"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df7/trap__api__message_8c.html#a985d4533500ceaf531c9e03b0d7d6f65">COMPILE_TIME_ASSERT</a> (sizeof(uint16) *CHAR_BIT==<a class="el" href="../../d1/d2b/trap__api__private_8h.html#a99b3b57edc721f603374c5b93a431d77a824e0e80e8583408504493c4f58abe34">CONDITION_WIDTH_16BIT</a>, uint16_is_really_16_bits)</td></tr>
<tr class="separator:a985d4533500ceaf531c9e03b0d7d6f65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75318a74c43e947ef190c98e006f03ef"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df7/trap__api__message_8c.html#a75318a74c43e947ef190c98e006f03ef">COMPILE_TIME_ASSERT</a> (sizeof(Task) *CHAR_BIT==<a class="el" href="../../d1/d2b/trap__api__private_8h.html#a99b3b57edc721f603374c5b93a431d77a381ce69f1b569d1dd5db6f2ff787736d">CONDITION_WIDTH_32BIT</a>, Task_is_really_32_bits)</td></tr>
<tr class="separator:a75318a74c43e947ef190c98e006f03ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33798b65e3f6cf0a9c28f96c565730c5"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df7/trap__api__message_8c.html#a33798b65e3f6cf0a9c28f96c565730c5">handle_message_free</a> (MessageId id, void *msg)</td></tr>
<tr class="memdesc:a33798b65e3f6cf0a9c28f96c565730c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handler to call when system messages are destroyed, either after delivering them to the consumer task or when cancelling them or flushing their task.  <a href="#a33798b65e3f6cf0a9c28f96c565730c5">More...</a><br /></td></tr>
<tr class="separator:a33798b65e3f6cf0a9c28f96c565730c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abeb0ee527f7fbb846fa8c76ae6e9ab0c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df7/trap__api__message_8c.html#abeb0ee527f7fbb846fa8c76ae6e9ab0c">COMPILE_TIME_ASSERT</a> (sizeof(Message)==sizeof(uint32), Message_not_32_bits)</td></tr>
<tr class="separator:abeb0ee527f7fbb846fa8c76ae6e9ab0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac05955800a3dcb900385a0c2c21a0408"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df7/trap__api__message_8c.html#ac05955800a3dcb900385a0c2c21a0408">COMPILE_TIME_ASSERT</a> (sizeof(void *)==sizeof(uint32), Pointer_not_32_bits)</td></tr>
<tr class="separator:ac05955800a3dcb900385a0c2c21a0408"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15e9e31aead35f1a4a2e45a467ef4dcf"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df7/trap__api__message_8c.html#a15e9e31aead35f1a4a2e45a467ef4dcf">vm_message_forget</a> (Task task)</td></tr>
<tr class="memdesc:a15e9e31aead35f1a4a2e45a467ef4dcf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove a task from the registered handlers list and from any streams or operators.  <a href="#a15e9e31aead35f1a4a2e45a467ef4dcf">More...</a><br /></td></tr>
<tr class="separator:a15e9e31aead35f1a4a2e45a467ef4dcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98d6cb4bbc05b8dbe2aeaf41afa2631f"><td class="memItemLeft" align="right" valign="top">static uint32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df7/trap__api__message_8c.html#a98d6cb4bbc05b8dbe2aeaf41afa2631f">vm_message_next</a> (void)</td></tr>
<tr class="memdesc:a98d6cb4bbc05b8dbe2aeaf41afa2631f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the next message or return the time in milliseconds until the next message is due.  <a href="#a98d6cb4bbc05b8dbe2aeaf41afa2631f">More...</a><br /></td></tr>
<tr class="separator:a98d6cb4bbc05b8dbe2aeaf41afa2631f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6dbb33c05bd41e0d85198ac82ed99c92"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df7/trap__api__message_8c.html#a6dbb33c05bd41e0d85198ac82ed99c92">vm_message_send_later</a> (Task task, uint16 id, void *message, uint32 delay, const void *c, <a class="el" href="../../d1/d2b/trap__api__private_8h.html#a99b3b57edc721f603374c5b93a431d77">CONDITION_WIDTH</a> c_width)</td></tr>
<tr class="memdesc:a6dbb33c05bd41e0d85198ac82ed99c92"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a message after a time delay.  <a href="#a6dbb33c05bd41e0d85198ac82ed99c92">More...</a><br /></td></tr>
<tr class="separator:a6dbb33c05bd41e0d85198ac82ed99c92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a632efd595caf7646e227fdc3e39ebbc4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df7/trap__api__message_8c.html#a632efd595caf7646e227fdc3e39ebbc4">vm_event_trigger</a> (void)</td></tr>
<tr class="memdesc:a632efd595caf7646e227fdc3e39ebbc4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Trigger the scheduler to run the handler that will deliver a queued message.  <a href="#a632efd595caf7646e227fdc3e39ebbc4">More...</a><br /></td></tr>
<tr class="separator:a632efd595caf7646e227fdc3e39ebbc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadfd1f2027f0d72d012ef07b0f21263f"><td class="memItemLeft" align="right" valign="top">static uint32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df7/trap__api__message_8c.html#aadfd1f2027f0d72d012ef07b0f21263f">get_message_condition_value</a> (const void *c, <a class="el" href="../../d1/d2b/trap__api__private_8h.html#a99b3b57edc721f603374c5b93a431d77">CONDITION_WIDTH</a> c_width)</td></tr>
<tr class="memdesc:aadfd1f2027f0d72d012ef07b0f21263f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dereference the given void pointer, assuming it has the given width.  <a href="#aadfd1f2027f0d72d012ef07b0f21263f">More...</a><br /></td></tr>
<tr class="separator:aadfd1f2027f0d72d012ef07b0f21263f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55a4061f3d393d99b3d406ff14983dc2"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df7/trap__api__message_8c.html#a55a4061f3d393d99b3d406ff14983dc2">similar</a> (const <a class="el" href="../../d0/d6e/structAppMessage.html">AppMessage</a> *a, const <a class="el" href="../../d0/d6e/structAppMessage.html">AppMessage</a> *b)</td></tr>
<tr class="memdesc:a55a4061f3d393d99b3d406ff14983dc2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compares two messages and decides whether they are similar enough that one could be dropped.  <a href="#a55a4061f3d393d99b3d406ff14983dc2">More...</a><br /></td></tr>
<tr class="separator:a55a4061f3d393d99b3d406ff14983dc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4cfff76666fadd08815c3ba369abaca"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df7/trap__api__message_8c.html#aa4cfff76666fadd08815c3ba369abaca">replace</a> (<a class="el" href="../../d0/d6e/structAppMessage.html">AppMessage</a> *a, const <a class="el" href="../../d0/d6e/structAppMessage.html">AppMessage</a> *b)</td></tr>
<tr class="memdesc:aa4cfff76666fadd08815c3ba369abaca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Replace one message with another.  <a href="#aa4cfff76666fadd08815c3ba369abaca">More...</a><br /></td></tr>
<tr class="separator:aa4cfff76666fadd08815c3ba369abaca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c56e2108f95396c18438e0122d792c9"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df7/trap__api__message_8c.html#a9c56e2108f95396c18438e0122d792c9">already</a> (Task task, uint16 id, uint16 *message)</td></tr>
<tr class="memdesc:a9c56e2108f95396c18438e0122d792c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether a message can be combined with one already in the message queue by using the <code><a class="el" href="../../da/df7/trap__api__message_8c.html#a55a4061f3d393d99b3d406ff14983dc2" title="Compares two messages and decides whether they are similar enough that one could be dropped...">similar()</a></code> and <code><a class="el" href="../../da/df7/trap__api__message_8c.html#aa4cfff76666fadd08815c3ba369abaca" title="Replace one message with another. ">replace()</a></code> functions.  <a href="#a9c56e2108f95396c18438e0122d792c9">More...</a><br /></td></tr>
<tr class="separator:a9c56e2108f95396c18438e0122d792c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad83e88ebdb11185c7bfc83a7cf488d4"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df7/trap__api__message_8c.html#aad83e88ebdb11185c7bfc83a7cf488d4">insert</a> (<a class="el" href="../../d0/d6e/structAppMessage.html">AppMessage</a> *a)</td></tr>
<tr class="memdesc:aad83e88ebdb11185c7bfc83a7cf488d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Insert a message into the queue if a similar one isn't already present.  <a href="#aad83e88ebdb11185c7bfc83a7cf488d4">More...</a><br /></td></tr>
<tr class="separator:aad83e88ebdb11185c7bfc83a7cf488d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea1c1d8b70e1512151f3260866441259"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df7/trap__api__message_8c.html#aea1c1d8b70e1512151f3260866441259">send_message</a> (Task task, uint16 id, void *message)</td></tr>
<tr class="memdesc:aea1c1d8b70e1512151f3260866441259"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a message immediately.  <a href="#aea1c1d8b70e1512151f3260866441259">More...</a><br /></td></tr>
<tr class="separator:aea1c1d8b70e1512151f3260866441259"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0563cf2f9ffd2bd08dcef39cd45c116b"><td class="memItemLeft" align="right" valign="top">Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df7/trap__api__message_8c.html#a0563cf2f9ffd2bd08dcef39cd45c116b">trap_api_register_message_task</a> (Task task, <a class="el" href="../../dc/de3/ipc__msg__types_8h.html#ab8b818cae0c424dc4cbf6fa21c68b18b">IPC_MSG_TYPE</a> msg_type_id)</td></tr>
<tr class="memdesc:a0563cf2f9ffd2bd08dcef39cd45c116b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a task for handling a certain message type.  <a href="#a0563cf2f9ffd2bd08dcef39cd45c116b">More...</a><br /></td></tr>
<tr class="separator:a0563cf2f9ffd2bd08dcef39cd45c116b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac57a3bc4cc5ff3579dd48a22fd740115"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df7/trap__api__message_8c.html#ac57a3bc4cc5ff3579dd48a22fd740115">trap_api_sched_init</a> (void **ppriv)</td></tr>
<tr class="memdesc:ac57a3bc4cc5ff3579dd48a22fd740115"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called by the scheduler when this scheduler task is started.  <a href="#ac57a3bc4cc5ff3579dd48a22fd740115">More...</a><br /></td></tr>
<tr class="separator:ac57a3bc4cc5ff3579dd48a22fd740115"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9db7569b6d83837420faa41360a6b70"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df7/trap__api__message_8c.html#ac9db7569b6d83837420faa41360a6b70">trap_api_sched_msg_handler</a> (void **ppriv)</td></tr>
<tr class="memdesc:ac9db7569b6d83837420faa41360a6b70"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call from the scheduler with a message posted to this scheduler queue to cause a message to be delivered from the message queue.  <a href="#ac9db7569b6d83837420faa41360a6b70">More...</a><br /></td></tr>
<tr class="separator:ac9db7569b6d83837420faa41360a6b70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f39613be3d1455b29e6ed560e692c1c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df7/trap__api__message_8c.html#a0f39613be3d1455b29e6ed560e692c1c">MessageSendLater</a> (Task task, MessageId id, void *message, uint32 delay)</td></tr>
<tr class="separator:a0f39613be3d1455b29e6ed560e692c1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77b36f30530a6cd62a2e0f34a787063c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df7/trap__api__message_8c.html#a77b36f30530a6cd62a2e0f34a787063c">MessageWait</a> (void *m)</td></tr>
<tr class="separator:a77b36f30530a6cd62a2e0f34a787063c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa608780f111499c54dbde65797a25e82"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df7/trap__api__message_8c.html#aa608780f111499c54dbde65797a25e82">MessageSendConditionally</a> (Task t, MessageId id, Message m, const uint16 *c)</td></tr>
<tr class="memdesc:aa608780f111499c54dbde65797a25e82"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a message to be be delivered when the corresponding uint16 is zero.  <a href="#aa608780f111499c54dbde65797a25e82">More...</a><br /></td></tr>
<tr class="separator:aa608780f111499c54dbde65797a25e82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a877a40c18669bd69f487d325369afd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df7/trap__api__message_8c.html#a0a877a40c18669bd69f487d325369afd">MessageSendConditionallyOnTask</a> (Task t, MessageId id, Message m, const Task *c)</td></tr>
<tr class="memdesc:a0a877a40c18669bd69f487d325369afd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a message to be be delivered when the corresponding Task is zero.  <a href="#a0a877a40c18669bd69f487d325369afd">More...</a><br /></td></tr>
<tr class="separator:a0a877a40c18669bd69f487d325369afd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab073d6e18fc7734b64b17adf1f36fece"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df7/trap__api__message_8c.html#ab073d6e18fc7734b64b17adf1f36fece">MessageFree</a> (MessageId id, Message data)</td></tr>
<tr class="separator:ab073d6e18fc7734b64b17adf1f36fece"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2fd37ea2615488c1bb535cdf5c0b2c5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df7/trap__api__message_8c.html#aa2fd37ea2615488c1bb535cdf5c0b2c5">trap_pio_send_msg</a> (Task task, uint16 bank, <a class="el" href="../../da/d9c/halauxio_8h.html#a1a92c58a9a45f8d8f93b17b34031b3c3">pio_size_bits</a> state, uint32 time)</td></tr>
<tr class="memdesc:aa2fd37ea2615488c1bb535cdf5c0b2c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function for constructing and sending a MessagePioChanged message to the customer task.  <a href="#aa2fd37ea2615488c1bb535cdf5c0b2c5">More...</a><br /></td></tr>
<tr class="separator:aa2fd37ea2615488c1bb535cdf5c0b2c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeec88e45ffb861687da8a15060b0de70"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df7/trap__api__message_8c.html#aeec88e45ffb861687da8a15060b0de70">MessageCancelFirst</a> (Task task, uint16 id)</td></tr>
<tr class="separator:aeec88e45ffb861687da8a15060b0de70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a953ecee7d9af90fb8b0b469d5290e710"><td class="memItemLeft" align="right" valign="top">uint16&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df7/trap__api__message_8c.html#a953ecee7d9af90fb8b0b469d5290e710">MessageCancelAll</a> (Task task, MessageId id)</td></tr>
<tr class="separator:a953ecee7d9af90fb8b0b469d5290e710"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e7e761f76a8dc42e40f6693514f3da0"><td class="memItemLeft" align="right" valign="top">uint16&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df7/trap__api__message_8c.html#a5e7e761f76a8dc42e40f6693514f3da0">MessageFlushTask</a> (Task task)</td></tr>
<tr class="separator:a5e7e761f76a8dc42e40f6693514f3da0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e79de42d5ec582e7a250e551be928ec"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df7/trap__api__message_8c.html#a9e79de42d5ec582e7a250e551be928ec">MessageLoop</a> (void)</td></tr>
<tr class="separator:a9e79de42d5ec582e7a250e551be928ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8dd4ee5d7b2a146e92dea3a25d9f79a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df7/trap__api__message_8c.html#ab8dd4ee5d7b2a146e92dea3a25d9f79a">trap_api_send_message_filtered</a> (<a class="el" href="../../dc/de3/ipc__msg__types_8h.html#ab8b818cae0c424dc4cbf6fa21c68b18b">IPC_MSG_TYPE</a> msg_type, uint16 id, void *message, bool allow_duplicates)</td></tr>
<tr class="memdesc:ab8dd4ee5d7b2a146e92dea3a25d9f79a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pass the given message to the given firmware message channel handler task, applying filtering as required.  <a href="#ab8dd4ee5d7b2a146e92dea3a25d9f79a">More...</a><br /></td></tr>
<tr class="separator:ab8dd4ee5d7b2a146e92dea3a25d9f79a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6748a840ab5fcdc685a6df7b4094adae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df7/trap__api__message_8c.html#a6748a840ab5fcdc685a6df7b4094adae">trap_api_send_message_to_task_filtered</a> (Task task, uint16 id, void *message, bool allow_duplicates)</td></tr>
<tr class="memdesc:a6748a840ab5fcdc685a6df7b4094adae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pass the given message to the given firmware handler task, applying filtering as required.  <a href="#a6748a840ab5fcdc685a6df7b4094adae">More...</a><br /></td></tr>
<tr class="separator:a6748a840ab5fcdc685a6df7b4094adae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8cf2e4e58113de0f106351c3e2e5606"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df7/trap__api__message_8c.html#ad8cf2e4e58113de0f106351c3e2e5606">is_high_priority_trigger</a> (uint16 system_message_id)</td></tr>
<tr class="memdesc:ad8cf2e4e58113de0f106351c3e2e5606"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is the given system message part of the set of high-priority handler triggers? (This set just contains the data-flow messages MESSAGE_MORE_DATA and MESSAGE_MORE_SPACE)  <a href="#ad8cf2e4e58113de0f106351c3e2e5606">More...</a><br /></td></tr>
<tr class="separator:ad8cf2e4e58113de0f106351c3e2e5606"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd1023998e25adee54f220a8d71736ae"><td class="memItemLeft" align="right" valign="top">Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df7/trap__api__message_8c.html#abd1023998e25adee54f220a8d71736ae">MessageSystemTask</a> (Task task)</td></tr>
<tr class="separator:abd1023998e25adee54f220a8d71736ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:af5893e2a0e551adcfef387be4bc592b5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/d6e/structAppMessage.html">AppMessage</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df7/trap__api__message_8c.html#af5893e2a0e551adcfef387be4bc592b5">vm_message_queue</a></td></tr>
<tr class="memdesc:af5893e2a0e551adcfef387be4bc592b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queue of messages waiting to be delivered.  <a href="#af5893e2a0e551adcfef387be4bc592b5">More...</a><br /></td></tr>
<tr class="separator:af5893e2a0e551adcfef387be4bc592b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba05ce7522150d34a3446a3f4aa4886b"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d5/d9b/sched__oxygen_8h.html#a05828f5e8e0c2edd18bada6005599046">msgid</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df7/trap__api__message_8c.html#aba05ce7522150d34a3446a3f4aa4886b">run_timer</a></td></tr>
<tr class="memdesc:aba05ce7522150d34a3446a3f4aa4886b"><td class="mdescLeft">&#160;</td><td class="mdescRight">run_timer is non-NULL when we have a message DELAYED in the VM_QUEUE.  <a href="#aba05ce7522150d34a3446a3f4aa4886b">More...</a><br /></td></tr>
<tr class="separator:aba05ce7522150d34a3446a3f4aa4886b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab312e853e4e28785ee6e72a7c21c7273"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d5/d9b/sched__oxygen_8h.html#a05828f5e8e0c2edd18bada6005599046">msgid</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df7/trap__api__message_8c.html#ab312e853e4e28785ee6e72a7c21c7273">sched_event_pending</a></td></tr>
<tr class="memdesc:ab312e853e4e28785ee6e72a7c21c7273"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether we have already posted a message to our own task to indicate we have work to do.  <a href="#ab312e853e4e28785ee6e72a7c21c7273">More...</a><br /></td></tr>
<tr class="separator:ab312e853e4e28785ee6e72a7c21c7273"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0912e9fb232e77de3ed1bff2bf454dd"><td class="memItemLeft" align="right" valign="top">Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df7/trap__api__message_8c.html#aa0912e9fb232e77de3ed1bff2bf454dd">registered_hdlrs</a> [<a class="el" href="../../dc/de3/ipc__msg__types_8h.html#ab8b818cae0c424dc4cbf6fa21c68b18ba4d9bda1519cf0249f8b00753387054ce">NUM_IPC_MSG_TYPES</a>]</td></tr>
<tr class="memdesc:aa0912e9fb232e77de3ed1bff2bf454dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Array of App-Task/sched-taskid pairings for registered message handlers.  <a href="#aa0912e9fb232e77de3ed1bff2bf454dd">More...</a><br /></td></tr>
<tr class="separator:aa0912e9fb232e77de3ed1bff2bf454dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a884357985340ad08eeccc4e36b105183"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a884357985340ad08eeccc4e36b105183">&#9670;&nbsp;</a></span>IO_DEFS_MODULE_K32_CORE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IO_DEFS_MODULE_K32_CORE</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac13b2b2d55bd945efb5ecb314c85bc21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac13b2b2d55bd945efb5ecb314c85bc21">&#9670;&nbsp;</a></span>IO_DEFS_MODULE_K32_DEBUG</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IO_DEFS_MODULE_K32_DEBUG</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a3cc8e25137086fea4c5cc9184a67a300"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3cc8e25137086fea4c5cc9184a67a300">&#9670;&nbsp;</a></span>IO_DEFS_MODULE_K32_MISC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IO_DEFS_MODULE_K32_MISC</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="abbb95bd926e61a65888501f8800e8174"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbb95bd926e61a65888501f8800e8174">&#9670;&nbsp;</a></span>vm_debug_message_cancel</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define vm_debug_message_cancel</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Not currently used. </p>
<p>Can be enabled for logging primitives. </p>

</div>
</div>
<a id="aae75edda29489fc5a1122ea8d2f987fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae75edda29489fc5a1122ea8d2f987fe">&#9670;&nbsp;</a></span>vm_debug_message_send</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define vm_debug_message_send</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Not currently used. </p>
<p>Can be enabled for logging primitives. </p>

</div>
</div>
<a id="a5671d5634b37c472d9e5af87d334c9b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5671d5634b37c472d9e5af87d334c9b2">&#9670;&nbsp;</a></span>VM_DIFF</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VM_DIFF</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">t, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">u&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(((int32)(t)) - ((int32)(u)))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Macro for comparing times. </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="adf764cbdea00d65edcd07bb9953ad2b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf764cbdea00d65edcd07bb9953ad2b7">&#9670;&nbsp;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Messages sent to the api message task to reschedule it in the background, either because a wait has expired, an enabled event has been triggered, host comms has completed, or a connection is dirty. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="adf764cbdea00d65edcd07bb9953ad2b7a440601069f0f9a6e6b39782e4cab2171"></a>VM_MSG_STANDARD_RUN&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="adf764cbdea00d65edcd07bb9953ad2b7aad6f2a0bda2b146fa494012825aa7233"></a>VM_MSG_SIMPLE_EVENT&#160;</td><td class="fielddoc"></td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a9c56e2108f95396c18438e0122d792c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c56e2108f95396c18438e0122d792c9">&#9670;&nbsp;</a></span>already()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool already </td>
          <td>(</td>
          <td class="paramtype">Task&#160;</td>
          <td class="paramname"><em>task</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16 *&#160;</td>
          <td class="paramname"><em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks whether a message can be combined with one already in the message queue by using the <code><a class="el" href="../../da/df7/trap__api__message_8c.html#a55a4061f3d393d99b3d406ff14983dc2" title="Compares two messages and decides whether they are similar enough that one could be dropped...">similar()</a></code> and <code><a class="el" href="../../da/df7/trap__api__message_8c.html#aa4cfff76666fadd08815c3ba369abaca" title="Replace one message with another. ">replace()</a></code> functions. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>Task the message will be posted to </td></tr>
    <tr><td class="paramname">id</td><td>ID of the message </td></tr>
    <tr><td class="paramname">message</td><td>Message contents </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TRUE if the message was combined with a previous one. </dd></dl>

</div>
</div>
<a id="a985d4533500ceaf531c9e03b0d7d6f65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a985d4533500ceaf531c9e03b0d7d6f65">&#9670;&nbsp;</a></span>COMPILE_TIME_ASSERT() <span class="overload">[1/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COMPILE_TIME_ASSERT </td>
          <td>(</td>
          <td class="paramtype">sizeof(uint16) *&#160;</td>
          <td class="paramname"><em>CHAR_BIT</em> = <code>=<a class="el" href="../../d1/d2b/trap__api__private_8h.html#a99b3b57edc721f603374c5b93a431d77a824e0e80e8583408504493c4f58abe34">CONDITION_WIDTH_16BIT</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_is_really_16_bits&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a75318a74c43e947ef190c98e006f03ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75318a74c43e947ef190c98e006f03ef">&#9670;&nbsp;</a></span>COMPILE_TIME_ASSERT() <span class="overload">[2/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COMPILE_TIME_ASSERT </td>
          <td>(</td>
          <td class="paramtype">sizeof(Task) *&#160;</td>
          <td class="paramname"><em>CHAR_BIT</em> = <code>=<a class="el" href="../../d1/d2b/trap__api__private_8h.html#a99b3b57edc721f603374c5b93a431d77a381ce69f1b569d1dd5db6f2ff787736d">CONDITION_WIDTH_32BIT</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Task_is_really_32_bits&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="abeb0ee527f7fbb846fa8c76ae6e9ab0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abeb0ee527f7fbb846fa8c76ae6e9ab0c">&#9670;&nbsp;</a></span>COMPILE_TIME_ASSERT() <span class="overload">[3/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COMPILE_TIME_ASSERT </td>
          <td>(</td>
          <td class="paramtype">sizeof(Message)&#160;</td>
          <td class="paramname"> = <code>=sizeof(uint32)</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Message_not_32_bits&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac05955800a3dcb900385a0c2c21a0408"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac05955800a3dcb900385a0c2c21a0408">&#9670;&nbsp;</a></span>COMPILE_TIME_ASSERT() <span class="overload">[4/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COMPILE_TIME_ASSERT </td>
          <td>(</td>
          <td class="paramtype">sizeof(void *)&#160;</td>
          <td class="paramname"> = <code>=sizeof(uint32)</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Pointer_not_32_bits&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aadfd1f2027f0d72d012ef07b0f21263f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aadfd1f2027f0d72d012ef07b0f21263f">&#9670;&nbsp;</a></span>get_message_condition_value()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint32 get_message_condition_value </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/d2b/trap__api__private_8h.html#a99b3b57edc721f603374c5b93a431d77">CONDITION_WIDTH</a>&#160;</td>
          <td class="paramname"><em>c_width</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Dereference the given void pointer, assuming it has the given width. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td>Pointer to dereference (a message condition pointer) </td></tr>
    <tr><td class="paramname">c_width</td><td>Width to cast to </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Value in the pointer or 0 if it is NULL </dd></dl>

</div>
</div>
<a id="a33798b65e3f6cf0a9c28f96c565730c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33798b65e3f6cf0a9c28f96c565730c5">&#9670;&nbsp;</a></span>handle_message_free()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void handle_message_free </td>
          <td>(</td>
          <td class="paramtype">MessageId&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handler to call when system messages are destroyed, either after delivering them to the consumer task or when cancelling them or flushing their task. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>The message ID </td></tr>
    <tr><td class="paramname">msg</td><td>The message body, cast to a non-const </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aad83e88ebdb11185c7bfc83a7cf488d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad83e88ebdb11185c7bfc83a7cf488d4">&#9670;&nbsp;</a></span>insert()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool insert </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d6e/structAppMessage.html">AppMessage</a> *&#160;</td>
          <td class="paramname"><em>a</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Insert a message into the queue if a similar one isn't already present. </p>
<p>The queue is kept in time order. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">a</td><td>Message being posted </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TRUE if the message was inserted into the queue or FALSE if there was already a similar one present. </dd></dl>

</div>
</div>
<a id="ad8cf2e4e58113de0f106351c3e2e5606"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8cf2e4e58113de0f106351c3e2e5606">&#9670;&nbsp;</a></span>is_high_priority_trigger()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool is_high_priority_trigger </td>
          <td>(</td>
          <td class="paramtype">uint16&#160;</td>
          <td class="paramname"><em>system_message_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Is the given system message part of the set of high-priority handler triggers? (This set just contains the data-flow messages MESSAGE_MORE_DATA and MESSAGE_MORE_SPACE) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">system_message_id</td><td>The message ID </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Whether it's a trigger message or not </dd></dl>

</div>
</div>
<a id="a953ecee7d9af90fb8b0b469d5290e710"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a953ecee7d9af90fb8b0b469d5290e710">&#9670;&nbsp;</a></span>MessageCancelAll()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16 MessageCancelAll </td>
          <td>(</td>
          <td class="paramtype">Task&#160;</td>
          <td class="paramname"><em>task</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MessageId&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aeec88e45ffb861687da8a15060b0de70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeec88e45ffb861687da8a15060b0de70">&#9670;&nbsp;</a></span>MessageCancelFirst()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool MessageCancelFirst </td>
          <td>(</td>
          <td class="paramtype">Task&#160;</td>
          <td class="paramname"><em>task</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a5e7e761f76a8dc42e40f6693514f3da0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e7e761f76a8dc42e40f6693514f3da0">&#9670;&nbsp;</a></span>MessageFlushTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16 MessageFlushTask </td>
          <td>(</td>
          <td class="paramtype">Task&#160;</td>
          <td class="paramname"><em>task</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ab073d6e18fc7734b64b17adf1f36fece"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab073d6e18fc7734b64b17adf1f36fece">&#9670;&nbsp;</a></span>MessageFree()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MessageFree </td>
          <td>(</td>
          <td class="paramtype">MessageId&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Message&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a9e79de42d5ec582e7a250e551be928ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e79de42d5ec582e7a250e551be928ec">&#9670;&nbsp;</a></span>MessageLoop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MessageLoop </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aa608780f111499c54dbde65797a25e82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa608780f111499c54dbde65797a25e82">&#9670;&nbsp;</a></span>MessageSendConditionally()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MessageSendConditionally </td>
          <td>(</td>
          <td class="paramtype">Task&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MessageId&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Message&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint16 *&#160;</td>
          <td class="paramname"><em>c</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a message to be be delivered when the corresponding uint16 is zero. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>The task to deliver the message to. </td></tr>
    <tr><td class="paramname">id</td><td>The message identifier. </td></tr>
    <tr><td class="paramname">m</td><td>The message data. </td></tr>
    <tr><td class="paramname">c</td><td>The condition that must be zero for the message to be delivered. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0a877a40c18669bd69f487d325369afd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a877a40c18669bd69f487d325369afd">&#9670;&nbsp;</a></span>MessageSendConditionallyOnTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MessageSendConditionallyOnTask </td>
          <td>(</td>
          <td class="paramtype">Task&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MessageId&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Message&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Task *&#160;</td>
          <td class="paramname"><em>c</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a message to be be delivered when the corresponding Task is zero. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>The task to deliver the message to. </td></tr>
    <tr><td class="paramname">id</td><td>The message identifier. </td></tr>
    <tr><td class="paramname">m</td><td>The message data. </td></tr>
    <tr><td class="paramname">c</td><td>The task that must be zero for the message to be delivered. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0f39613be3d1455b29e6ed560e692c1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f39613be3d1455b29e6ed560e692c1c">&#9670;&nbsp;</a></span>MessageSendLater()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MessageSendLater </td>
          <td>(</td>
          <td class="paramtype">Task&#160;</td>
          <td class="paramname"><em>task</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MessageId&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32&#160;</td>
          <td class="paramname"><em>delay</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="abd1023998e25adee54f220a8d71736ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd1023998e25adee54f220a8d71736ae">&#9670;&nbsp;</a></span>MessageSystemTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Task MessageSystemTask </td>
          <td>(</td>
          <td class="paramtype">Task&#160;</td>
          <td class="paramname"><em>task</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a77b36f30530a6cd62a2e0f34a787063c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77b36f30530a6cd62a2e0f34a787063c">&#9670;&nbsp;</a></span>MessageWait()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MessageWait </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aa4cfff76666fadd08815c3ba369abaca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4cfff76666fadd08815c3ba369abaca">&#9670;&nbsp;</a></span>replace()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool replace </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d6e/structAppMessage.html">AppMessage</a> *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d0/d6e/structAppMessage.html">AppMessage</a> *&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Replace one message with another. </p>
<p>Used when a later message contains more up to date information than an earlier one. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">a</td><td>Message to be replaced </td></tr>
    <tr><td class="paramname">b</td><td>Message to put in place of <code>a</code> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TRUE if message <code>a</code> was replaced by message <code>b</code> </dd></dl>

</div>
</div>
<a id="aea1c1d8b70e1512151f3260866441259"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea1c1d8b70e1512151f3260866441259">&#9670;&nbsp;</a></span>send_message()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void send_message </td>
          <td>(</td>
          <td class="paramtype">Task&#160;</td>
          <td class="paramname"><em>task</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Send a message immediately. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>Task to deliver the message to </td></tr>
    <tr><td class="paramname">id</td><td>ID of the message </td></tr>
    <tr><td class="paramname">message</td><td>The message contents </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a55a4061f3d393d99b3d406ff14983dc2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55a4061f3d393d99b3d406ff14983dc2">&#9670;&nbsp;</a></span>similar()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool similar </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d0/d6e/structAppMessage.html">AppMessage</a> *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d0/d6e/structAppMessage.html">AppMessage</a> *&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compares two messages and decides whether they are similar enough that one could be dropped. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">a</td><td>First message </td></tr>
    <tr><td class="paramname">b</td><td>Second message </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TRUE if the two events are equivalent </dd></dl>

</div>
</div>
<a id="a0563cf2f9ffd2bd08dcef39cd45c116b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0563cf2f9ffd2bd08dcef39cd45c116b">&#9670;&nbsp;</a></span>trap_api_register_message_task()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Task trap_api_register_message_task </td>
          <td>(</td>
          <td class="paramtype">Task&#160;</td>
          <td class="paramname"><em>task</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/de3/ipc__msg__types_8h.html#ab8b818cae0c424dc4cbf6fa21c68b18b">IPC_MSG_TYPE</a>&#160;</td>
          <td class="paramname"><em>msg_type_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a task for handling a certain message type. </p>
<p>Helper function to register a trap API Task with the Oxygen scheduler, returning the previously-registered Task (NULL if none)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>Task to receive the messages </td></tr>
    <tr><td class="paramname">msg_type_id</td><td>Type of message the task is to be passed </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The previous task registered for this message type </dd></dl>

</div>
</div>
<a id="ac57a3bc4cc5ff3579dd48a22fd740115"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac57a3bc4cc5ff3579dd48a22fd740115">&#9670;&nbsp;</a></span>trap_api_sched_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trap_api_sched_init </td>
          <td>(</td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>ppriv</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called by the scheduler when this scheduler task is started. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ppriv</td><td>Unused context </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac9db7569b6d83837420faa41360a6b70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9db7569b6d83837420faa41360a6b70">&#9670;&nbsp;</a></span>trap_api_sched_msg_handler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trap_api_sched_msg_handler </td>
          <td>(</td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>ppriv</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Call from the scheduler with a message posted to this scheduler queue to cause a message to be delivered from the message queue. </p>
<p>This function posts a new scheduler message if there is more work to be done (messages in the queue). </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ppriv</td><td>Unused context </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab8dd4ee5d7b2a146e92dea3a25d9f79a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8dd4ee5d7b2a146e92dea3a25d9f79a">&#9670;&nbsp;</a></span>trap_api_send_message_filtered()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trap_api_send_message_filtered </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/de3/ipc__msg__types_8h.html#ab8b818cae0c424dc4cbf6fa21c68b18b">IPC_MSG_TYPE</a>&#160;</td>
          <td class="paramname"><em>msg_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>allow_duplicates</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pass the given message to the given firmware message channel handler task, applying filtering as required. </p>
<dl class="section note"><dt>Note</dt><dd>This function is essentially equivalent to "vm_send_message_filtered" in vm_message.c in the BC VM</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg_type</td><td>Firmware message channel ID </td></tr>
    <tr><td class="paramname">id</td><td>Message int </td></tr>
    <tr><td class="paramname">message</td><td>Message body </td></tr>
    <tr><td class="paramname">allow_duplicates</td><td>Whether to filter the task's queue for duplicates </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6748a840ab5fcdc685a6df7b4094adae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6748a840ab5fcdc685a6df7b4094adae">&#9670;&nbsp;</a></span>trap_api_send_message_to_task_filtered()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trap_api_send_message_to_task_filtered </td>
          <td>(</td>
          <td class="paramtype">Task&#160;</td>
          <td class="paramname"><em>task</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>allow_duplicates</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pass the given message to the given firmware handler task, applying filtering as required. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>Firmware handler task </td></tr>
    <tr><td class="paramname">id</td><td>Message int </td></tr>
    <tr><td class="paramname">message</td><td>Message body </td></tr>
    <tr><td class="paramname">allow_duplicates</td><td>Whether to filter the task's queue for duplicates </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa2fd37ea2615488c1bb535cdf5c0b2c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2fd37ea2615488c1bb535cdf5c0b2c5">&#9670;&nbsp;</a></span>trap_pio_send_msg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trap_pio_send_msg </td>
          <td>(</td>
          <td class="paramtype">Task&#160;</td>
          <td class="paramname"><em>task</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16&#160;</td>
          <td class="paramname"><em>bank</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d9c/halauxio_8h.html#a1a92c58a9a45f8d8f93b17b34031b3c3">pio_size_bits</a>&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32&#160;</td>
          <td class="paramname"><em>time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Helper function for constructing and sending a MessagePioChanged message to the customer task. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>Customer task. </td></tr>
    <tr><td class="paramname">bank</td><td>PIO bank index. </td></tr>
    <tr><td class="paramname">state</td><td>PIO levels. </td></tr>
    <tr><td class="paramname">time</td><td>Timestamp in milliseconds. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a632efd595caf7646e227fdc3e39ebbc4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a632efd595caf7646e227fdc3e39ebbc4">&#9670;&nbsp;</a></span>vm_event_trigger()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void vm_event_trigger </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Trigger the scheduler to run the handler that will deliver a queued message. </p>

</div>
</div>
<a id="a15e9e31aead35f1a4a2e45a467ef4dcf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15e9e31aead35f1a4a2e45a467ef4dcf">&#9670;&nbsp;</a></span>vm_message_forget()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void vm_message_forget </td>
          <td>(</td>
          <td class="paramtype">Task&#160;</td>
          <td class="paramname"><em>task</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Remove a task from the registered handlers list and from any streams or operators. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>The task to be removed </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a98d6cb4bbc05b8dbe2aeaf41afa2631f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98d6cb4bbc05b8dbe2aeaf41afa2631f">&#9670;&nbsp;</a></span>vm_message_next()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint32 vm_message_next </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the next message or return the time in milliseconds until the next message is due. </p>

</div>
</div>
<a id="a6dbb33c05bd41e0d85198ac82ed99c92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6dbb33c05bd41e0d85198ac82ed99c92">&#9670;&nbsp;</a></span>vm_message_send_later()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void vm_message_send_later </td>
          <td>(</td>
          <td class="paramtype">Task&#160;</td>
          <td class="paramname"><em>task</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32&#160;</td>
          <td class="paramname"><em>delay</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/d2b/trap__api__private_8h.html#a99b3b57edc721f603374c5b93a431d77">CONDITION_WIDTH</a>&#160;</td>
          <td class="paramname"><em>c_width</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Send a message after a time delay. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>Task to deliver the message to </td></tr>
    <tr><td class="paramname">id</td><td>ID of the message </td></tr>
    <tr><td class="paramname">message</td><td>The message contents Send a message after a time delay </td></tr>
    <tr><td class="paramname">task</td><td>Task to deliver the message to </td></tr>
    <tr><td class="paramname">id</td><td>ID of the message </td></tr>
    <tr><td class="paramname">message</td><td>The message contents </td></tr>
    <tr><td class="paramname">delay</td><td>Number of milliseconds to wait before delivering the message </td></tr>
    <tr><td class="paramname">c</td><td>Optional pointer to a condition which must be zero for the message to be delivered. </td></tr>
    <tr><td class="paramname">c_width</td><td>Whether to test the condition as a 16 or 32-bit variable or <code>CONDITION_WIDTH_UNUSED</code> if <code>c</code> is NULL. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="aa0912e9fb232e77de3ed1bff2bf454dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0912e9fb232e77de3ed1bff2bf454dd">&#9670;&nbsp;</a></span>registered_hdlrs</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Task registered_hdlrs[<a class="el" href="../../dc/de3/ipc__msg__types_8h.html#ab8b818cae0c424dc4cbf6fa21c68b18ba4d9bda1519cf0249f8b00753387054ce">NUM_IPC_MSG_TYPES</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Array of App-Task/sched-taskid pairings for registered message handlers. </p>
<dl class="section note"><dt>Note</dt><dd>The initialiser for this array must correspond to the enumeration above </dd></dl>

</div>
</div>
<a id="aba05ce7522150d34a3446a3f4aa4886b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba05ce7522150d34a3446a3f4aa4886b">&#9670;&nbsp;</a></span>run_timer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d5/d9b/sched__oxygen_8h.html#a05828f5e8e0c2edd18bada6005599046">msgid</a> run_timer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>run_timer is non-NULL when we have a message DELAYED in the VM_QUEUE. </p>
<p>Set to initial 0 by crt </p>

</div>
</div>
<a id="ab312e853e4e28785ee6e72a7c21c7273"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab312e853e4e28785ee6e72a7c21c7273">&#9670;&nbsp;</a></span>sched_event_pending</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d5/d9b/sched__oxygen_8h.html#a05828f5e8e0c2edd18bada6005599046">msgid</a> sched_event_pending</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Whether we have already posted a message to our own task to indicate we have work to do. </p>
<p>Used to prevent having more than one outstanding message in the scheduler. </p>

</div>
</div>
<a id="af5893e2a0e551adcfef387be4bc592b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5893e2a0e551adcfef387be4bc592b5">&#9670;&nbsp;</a></span>vm_message_queue</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d0/d6e/structAppMessage.html">AppMessage</a>* vm_message_queue</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Queue of messages waiting to be delivered. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.14-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_9104b11b055a08855e18ab07d1360a34.html">apps_ext_adk64r_RC_CI_qcc512x_qcc302x_1908091004</a></li><li class="navelem"><a class="el" href="../../dir_19c4644e84b768df42bf93899dbb4e83.html">apps_package</a></li><li class="navelem"><a class="el" href="../../dir_e9f51238b5eab91050ba7b42263dc658.html">progfiles</a></li><li class="navelem"><a class="el" href="../../dir_86fefe393b7ca9a63838560cf4ca04cf.html">apps</a></li><li class="navelem"><a class="el" href="../../dir_240681f6dc407f95ae9103d80499b5b4.html">fw</a></li><li class="navelem"><a class="el" href="../../dir_67a3fc20251395f7d62aa73621d4d7c9.html">src</a></li><li class="navelem"><a class="el" href="../../dir_2df9e3cb6e5829dd2cad2be1f6e120b8.html">customer</a></li><li class="navelem"><a class="el" href="../../dir_9f3ab7fd6590a3ea0f63e91f29976217.html">core</a></li><li class="navelem"><a class="el" href="../../dir_e587cb34e62244177c9f94cc60412e43.html">trap_api</a></li><li class="navelem"><a class="el" href="../../da/df7/trap__api__message_8c.html">trap_api_message.c</a></li>
    <li class="footer">Copyright (c) 2019 Qualcomm Technologies International, Ltd. Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
