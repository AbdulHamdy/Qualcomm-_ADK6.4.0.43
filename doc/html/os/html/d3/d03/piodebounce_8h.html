<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OS: piodebounce.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OS
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d3/d03/piodebounce_8h.html','../../');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">piodebounce.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Debounce input bits on the pio port.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../dc/d60/pio_8h_source.html">pio/pio.h</a>&quot;</code><br />
</div>
<p><a href="../../d3/d03/piodebounce_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a677b6d368613c0a46fb4e90aad91b270"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d03/piodebounce_8h.html#a677b6d368613c0a46fb4e90aad91b270">PIODEBOUNCE_NUMBER_OF_GROUPS</a>&#160;&#160;&#160;2</td></tr>
<tr class="memdesc:a677b6d368613c0a46fb4e90aad91b270"><td class="mdescLeft">&#160;</td><td class="mdescRight">Defines the number of supported PIO groups.  <a href="#a677b6d368613c0a46fb4e90aad91b270">More...</a><br /></td></tr>
<tr class="separator:a677b6d368613c0a46fb4e90aad91b270"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a53e5589a3d633734abc51322ab6b09d4"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d03/piodebounce_8h.html#a53e5589a3d633734abc51322ab6b09d4">piodebounce_cb</a>) (uint16 group, uint16 bank)</td></tr>
<tr class="memdesc:a53e5589a3d633734abc51322ab6b09d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type definition for the callback.  <a href="#a53e5589a3d633734abc51322ab6b09d4">More...</a><br /></td></tr>
<tr class="separator:a53e5589a3d633734abc51322ab6b09d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aefdfb02023612f19afe94f181a1e06f6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d03/piodebounce_8h.html#aefdfb02023612f19afe94f181a1e06f6">init_piodebounce</a> (void)</td></tr>
<tr class="memdesc:aefdfb02023612f19afe94f181a1e06f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise the PIO debounce system.  <a href="#aefdfb02023612f19afe94f181a1e06f6">More...</a><br /></td></tr>
<tr class="separator:aefdfb02023612f19afe94f181a1e06f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae486065c67315425aa8b305f81eb9a68"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d03/piodebounce_8h.html#ae486065c67315425aa8b305f81eb9a68">piodebounce_config</a> (uint16 group, uint16 bank, <a class="el" href="../../da/d9c/halauxio_8h.html#a1a92c58a9a45f8d8f93b17b34031b3c3">pio_size_bits</a> mask, uint16 nreads, uint16 period, <a class="el" href="../../d3/d03/piodebounce_8h.html#a53e5589a3d633734abc51322ab6b09d4">piodebounce_cb</a> callback)</td></tr>
<tr class="memdesc:ae486065c67315425aa8b305f81eb9a68"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures the piodebounce subsystem to monitor and debounce the pio input lines defined by the set of 1s in "mask".  <a href="#ae486065c67315425aa8b305f81eb9a68">More...</a><br /></td></tr>
<tr class="separator:ae486065c67315425aa8b305f81eb9a68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9435eea7b9a6ee2ffc4992d857eaf074"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d03/piodebounce_8h.html#a9435eea7b9a6ee2ffc4992d857eaf074">piodebounce_kick</a> (uint16 group)</td></tr>
<tr class="memdesc:a9435eea7b9a6ee2ffc4992d857eaf074"><td class="mdescLeft">&#160;</td><td class="mdescRight">Force the debounce engine into life.  <a href="#a9435eea7b9a6ee2ffc4992d857eaf074">More...</a><br /></td></tr>
<tr class="separator:a9435eea7b9a6ee2ffc4992d857eaf074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16fc3ecff26cdbf1b1681e7fe37e153f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../da/d9c/halauxio_8h.html#a1a92c58a9a45f8d8f93b17b34031b3c3">pio_size_bits</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d03/piodebounce_8h.html#a16fc3ecff26cdbf1b1681e7fe37e153f">piodebounce_get</a> (uint16 group, uint16 bank)</td></tr>
<tr class="memdesc:a16fc3ecff26cdbf1b1681e7fe37e153f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the debounced pio port value.  <a href="#a16fc3ecff26cdbf1b1681e7fe37e153f">More...</a><br /></td></tr>
<tr class="separator:a16fc3ecff26cdbf1b1681e7fe37e153f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Debounce input bits on the pio port. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a677b6d368613c0a46fb4e90aad91b270"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a677b6d368613c0a46fb4e90aad91b270">&#9670;&nbsp;</a></span>PIODEBOUNCE_NUMBER_OF_GROUPS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PIODEBOUNCE_NUMBER_OF_GROUPS&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Defines the number of supported PIO groups. </p>
<p>When changig this please be aware that the implementations needs a few changes too. </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a53e5589a3d633734abc51322ab6b09d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53e5589a3d633734abc51322ab6b09d4">&#9670;&nbsp;</a></span>piodebounce_cb</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* piodebounce_cb) (uint16 group, uint16 bank)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Type definition for the callback. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="aefdfb02023612f19afe94f181a1e06f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aefdfb02023612f19afe94f181a1e06f6">&#9670;&nbsp;</a></span>init_piodebounce()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void init_piodebounce </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialise the PIO debounce system. </p>

</div>
</div>
<a id="ae486065c67315425aa8b305f81eb9a68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae486065c67315425aa8b305f81eb9a68">&#9670;&nbsp;</a></span>piodebounce_config()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void piodebounce_config </td>
          <td>(</td>
          <td class="paramtype">uint16&#160;</td>
          <td class="paramname"><em>group</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16&#160;</td>
          <td class="paramname"><em>bank</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d9c/halauxio_8h.html#a1a92c58a9a45f8d8f93b17b34031b3c3">pio_size_bits</a>&#160;</td>
          <td class="paramname"><em>mask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16&#160;</td>
          <td class="paramname"><em>nreads</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16&#160;</td>
          <td class="paramname"><em>period</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d03/piodebounce_8h.html#a53e5589a3d633734abc51322ab6b09d4">piodebounce_cb</a>&#160;</td>
          <td class="paramname"><em>callback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configures the piodebounce subsystem to monitor and debounce the pio input lines defined by the set of 1s in "mask". </p>
<p>The debounce algorithm requires that "nreads" readings of the monitored pio pins, each "period" milliseconds apart, to be the same before it accepts the pins' values are stable. It then compares the values with the last known stable values. If these differ the piodebounce subsystem raises an evt event. Ideally, all of the bits defined in "mask" should map to pio pins that have hardware support for input edge-detection. This function asks the pioint subsystem to monitor these pins, but some or all of the pins may not have edge-detection hardware; this misfortune is not reported to the caller. Although not advised, the monitor/debouncer can be kicked into activity manually by calling <a class="el" href="../../d3/d03/piodebounce_8h.html#a9435eea7b9a6ee2ffc4992d857eaf074" title="Force the debounce engine into life. ">piodebounce_kick()</a>. This simulates a pioint call - pretending that a value change has been detected on a pio input port. If "nreads" is 1 then the debouncing mechanism is disabled; any perceived change on the pio pins provokes an evt. If "nreads" is 0 then any stimulus, either from pioint or from <a class="el" href="../../d3/d03/piodebounce_8h.html#a9435eea7b9a6ee2ffc4992d857eaf074" title="Force the debounce engine into life. ">piodebounce_kick()</a> provokes an evt. Up to <code>PIODEBOUNCE_NUMBER_OF_GROUPS</code> PIO groups are supported. Each group of PIOs has it's own independent settings. Calls to this function replace any existing configuration for the current group - calling once to monitor pin 4, then again to monitor pin 5 results in only pin5 being monitored. However, separate records are kept for different PIO banks and changing one will not alter the others. If "bitmask" is zero then the monitoring is disabled. It is up to the caller to ensure the input bits to be monitored are available. This call does not configure the bit directions of the pio port. The caller will normally set this using the pio API. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">group</td><td>Select PIO group. </td></tr>
    <tr><td class="paramname">bank</td><td>PIO bank index. </td></tr>
    <tr><td class="paramname">mask</td><td>PIO mask. </td></tr>
    <tr><td class="paramname">nreads</td><td>Number of reads to perform in order to determine if the pins are stable. </td></tr>
    <tr><td class="paramname">period</td><td>Time in milliseconds between each successive read. </td></tr>
    <tr><td class="paramname">callback</td><td>Function pointer to user's callback function. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a16fc3ecff26cdbf1b1681e7fe37e153f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16fc3ecff26cdbf1b1681e7fe37e153f">&#9670;&nbsp;</a></span>piodebounce_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/d9c/halauxio_8h.html#a1a92c58a9a45f8d8f93b17b34031b3c3">pio_size_bits</a> piodebounce_get </td>
          <td>(</td>
          <td class="paramtype">uint16&#160;</td>
          <td class="paramname"><em>group</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16&#160;</td>
          <td class="paramname"><em>bank</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read the debounced pio port value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">group</td><td>Select PIO group. </td></tr>
    <tr><td class="paramname">bank</td><td>PIO bank index. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PIO mask indicating the PIO values. </dd></dl>

</div>
</div>
<a id="a9435eea7b9a6ee2ffc4992d857eaf074"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9435eea7b9a6ee2ffc4992d857eaf074">&#9670;&nbsp;</a></span>piodebounce_kick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void piodebounce_kick </td>
          <td>(</td>
          <td class="paramtype">uint16&#160;</td>
          <td class="paramname"><em>group</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Force the debounce engine into life. </p>
<p>This simulates an interrupt being received from pioint. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">group</td><td>PIO group that will be serviced by the debounce engine. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.14-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_9104b11b055a08855e18ab07d1360a34.html">apps_ext_adk64r_RC_CI_qcc512x_qcc302x_1908091004</a></li><li class="navelem"><a class="el" href="../../dir_19c4644e84b768df42bf93899dbb4e83.html">apps_package</a></li><li class="navelem"><a class="el" href="../../dir_e9f51238b5eab91050ba7b42263dc658.html">progfiles</a></li><li class="navelem"><a class="el" href="../../dir_86fefe393b7ca9a63838560cf4ca04cf.html">apps</a></li><li class="navelem"><a class="el" href="../../dir_240681f6dc407f95ae9103d80499b5b4.html">fw</a></li><li class="navelem"><a class="el" href="../../dir_67a3fc20251395f7d62aa73621d4d7c9.html">src</a></li><li class="navelem"><a class="el" href="../../dir_721b2a6acf65b21a05ec9c4de6b97c06.html">core</a></li><li class="navelem"><a class="el" href="../../dir_ffcab5260bb17aa1460ef7840efd3069.html">piodebounce</a></li><li class="navelem"><a class="el" href="../../d3/d03/piodebounce_8h.html">piodebounce.h</a></li>
    <li class="footer">Copyright (c) 2019 Qualcomm Technologies International, Ltd. Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
