<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OS: dorm_private.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OS
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('dd/d94/dorm__private_8h.html','../../');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">dorm_private.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Private header for the Hydra dorm module.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../d6/dac/dorm_8h_source.html">dorm/dorm.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../de/d69/hydra__macros_8h_source.html">hydra/hydra_macros.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d8/d4b/hal_8h_source.html">hal/hal.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/d39/hydra__patch_8h_source.html">hydra/hydra_patch.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../da/d67/hydra__log_8h_source.html">hydra_log/hydra_log.h</a>&quot;</code><br />
</div>
<p><a href="../../dd/d94/dorm__private_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dda/structdorm__cfg__t.html">dorm_cfg_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Local configuration.  <a href="../../db/dda/structdorm__cfg__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a4277d6ae1af9ccc866e0465555ea2cfb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d94/dorm__private_8h.html#a4277d6ae1af9ccc866e0465555ea2cfb">IO_DEFS_MODULE_CHIP</a>&#160;&#160;&#160;/* An again */</td></tr>
<tr class="separator:a4277d6ae1af9ccc866e0465555ea2cfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12b0b52fac12d322fbd3892b9d018cfa"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d94/dorm__private_8h.html#a12b0b52fac12d322fbd3892b9d018cfa">DORM_EARLIEST_WAKEUP_TIME_NO_DEADLINE</a>&#160;&#160;&#160;(1)</td></tr>
<tr class="memdesc:a12b0b52fac12d322fbd3892b9d018cfa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Special wake up times used to request sleep with no deadline.  <a href="#a12b0b52fac12d322fbd3892b9d018cfa">More...</a><br /></td></tr>
<tr class="separator:a12b0b52fac12d322fbd3892b9d018cfa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63cb60b5824bd047da389f24ac5a89b1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d94/dorm__private_8h.html#a63cb60b5824bd047da389f24ac5a89b1">DORM_LATEST_WAKEUP_TIME_NO_DEADLINE</a>&#160;&#160;&#160;(0)</td></tr>
<tr class="separator:a63cb60b5824bd047da389f24ac5a89b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a216038fc9e6599475362db7609f22ddd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d94/dorm__private_8h.html#a216038fc9e6599475362db7609f22ddd">DEEP_SLEEP_MIN_TIME</a>&#160;&#160;&#160;(10 * <a class="el" href="../../d7/d66/haltime_8h.html#a6f1e731907521317e8a272d5ae57364e">MILLISECOND</a>)</td></tr>
<tr class="memdesc:a216038fc9e6599475362db7609f22ddd"><td class="mdescLeft">&#160;</td><td class="mdescRight">The minimum time for which it's worth doing deep sleep signalling.  <a href="#a216038fc9e6599475362db7609f22ddd">More...</a><br /></td></tr>
<tr class="separator:a216038fc9e6599475362db7609f22ddd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fccf524d2c5491693d15dad9dfc897a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d94/dorm__private_8h.html#a5fccf524d2c5491693d15dad9dfc897a">MMU_RATE_DEEP_SLEEP</a>&#160;&#160;&#160;(0xffff)</td></tr>
<tr class="memdesc:a5fccf524d2c5491693d15dad9dfc897a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Value stored in shared.dorm[].min_mmu_rate to indicated deep sleep.  <a href="#a5fccf524d2c5491693d15dad9dfc897a">More...</a><br /></td></tr>
<tr class="separator:a5fccf524d2c5491693d15dad9dfc897a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a166bf98e6309489869b3136432136315"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d94/dorm__private_8h.html#a166bf98e6309489869b3136432136315">MIN_MMU_RATE_DEFAULT</a>&#160;&#160;&#160;(255U /* MMU_FULL / ((127 &lt;&lt; 4) + 1) MHz */)</td></tr>
<tr class="memdesc:a166bf98e6309489869b3136432136315"><td class="mdescLeft">&#160;</td><td class="mdescRight">Other values of min_mmu_rate are used directly in the hardware.  <a href="#a166bf98e6309489869b3136432136315">More...</a><br /></td></tr>
<tr class="separator:a166bf98e6309489869b3136432136315"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7667b4c3a9419f5781bcd8a3f04f079"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d94/dorm__private_8h.html#ac7667b4c3a9419f5781bcd8a3f04f079">REDUCED_MMU_RATE_DEFAULT</a>&#160;&#160;&#160;(5U)</td></tr>
<tr class="memdesc:ac7667b4c3a9419f5781bcd8a3f04f079"><td class="mdescLeft">&#160;</td><td class="mdescRight">Special rate used when full shallow sleep is not appropriate.  <a href="#ac7667b4c3a9419f5781bcd8a3f04f079">More...</a><br /></td></tr>
<tr class="separator:ac7667b4c3a9419f5781bcd8a3f04f079"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a976b360d529e4b1917457c5219295567"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d94/dorm__private_8h.html#a976b360d529e4b1917457c5219295567">FULL_MMU_RATE_DEFAULT</a>&#160;&#160;&#160;(0U)</td></tr>
<tr class="memdesc:a976b360d529e4b1917457c5219295567"><td class="mdescLeft">&#160;</td><td class="mdescRight">Full ungated MMU clock rate as supplied to the subsystem.  <a href="#a976b360d529e4b1917457c5219295567">More...</a><br /></td></tr>
<tr class="separator:a976b360d529e4b1917457c5219295567"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4552323385a8eccf9e71097e4062e258"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d94/dorm__private_8h.html#a4552323385a8eccf9e71097e4062e258">SHALLOW_SLEEP_CLKGEN_CORE_CLK_RATE_VALUE</a>&#160;&#160;&#160;15</td></tr>
<tr class="memdesc:a4552323385a8eccf9e71097e4062e258"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum divider value for register CLKGEN_CORE_CLK_RATE for reducing the subsystem clock to save power.  <a href="#a4552323385a8eccf9e71097e4062e258">More...</a><br /></td></tr>
<tr class="separator:a4552323385a8eccf9e71097e4062e258"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88d3c2a64c0ebec3f2000ef28c429763"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d94/dorm__private_8h.html#a88d3c2a64c0ebec3f2000ef28c429763">MIN_MMU_RATE</a>&#160;&#160;&#160;<a class="el" href="../../dd/d94/dorm__private_8h.html#a166bf98e6309489869b3136432136315">MIN_MMU_RATE_DEFAULT</a></td></tr>
<tr class="separator:a88d3c2a64c0ebec3f2000ef28c429763"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af44daaa65bbc339a32ea8c64a597ff7f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d94/dorm__private_8h.html#af44daaa65bbc339a32ea8c64a597ff7f">REDUCED_MMU_RATE</a>&#160;&#160;&#160;<a class="el" href="../../dd/d94/dorm__private_8h.html#ac7667b4c3a9419f5781bcd8a3f04f079">REDUCED_MMU_RATE_DEFAULT</a></td></tr>
<tr class="separator:af44daaa65bbc339a32ea8c64a597ff7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e33941adab5bfc49e3520a4d8256cbf"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d94/dorm__private_8h.html#a0e33941adab5bfc49e3520a4d8256cbf">FULL_MMU_RATE</a>&#160;&#160;&#160;<a class="el" href="../../dd/d94/dorm__private_8h.html#a976b360d529e4b1917457c5219295567">FULL_MMU_RATE_DEFAULT</a></td></tr>
<tr class="separator:a0e33941adab5bfc49e3520a4d8256cbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a576548bb524b75a1327c4bb57338b61e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d94/dorm__private_8h.html#a576548bb524b75a1327c4bb57338b61e">DORM_ENTER_CRITICAL_SECTION</a>()&#160;&#160;&#160;block_interrupt_levels(INT_LEVELS)</td></tr>
<tr class="memdesc:a576548bb524b75a1327c4bb57338b61e"><td class="mdescLeft">&#160;</td><td class="mdescRight">In addition to preventing a race with the other processor setting a different minimum CPU rate, we need to be careful in case the foreground has told us not to enter shallow sleep.  <a href="#a576548bb524b75a1327c4bb57338b61e">More...</a><br /></td></tr>
<tr class="separator:a576548bb524b75a1327c4bb57338b61e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a783253d029a0ecca55cc020cab8b4f1d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d94/dorm__private_8h.html#a783253d029a0ecca55cc020cab8b4f1d">DORM_LEAVE_CRITICAL_SECTION</a>()&#160;&#160;&#160;unblock_interrupt_levels(INT_LEVELS)</td></tr>
<tr class="separator:a783253d029a0ecca55cc020cab8b4f1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad1624457b7f9e46e9078d81b6b28f0d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d94/dorm__private_8h.html#aad1624457b7f9e46e9078d81b6b28f0d">DORM_STATIC</a>&#160;&#160;&#160;static</td></tr>
<tr class="separator:aad1624457b7f9e46e9078d81b6b28f0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea9588e5708e3518f19e2f5d9f585c46"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d94/dorm__private_8h.html#aea9588e5708e3518f19e2f5d9f585c46">DORM_CONST</a>&#160;&#160;&#160;const</td></tr>
<tr class="separator:aea9588e5708e3518f19e2f5d9f585c46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf8a42ed83ce38e9b1c92f1881a16c8f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d94/dorm__private_8h.html#abf8a42ed83ce38e9b1c92f1881a16c8f">enter_shallow_sleep_with_reduced_clock</a>()&#160;&#160;&#160;<a class="el" href="../../db/dfb/sched__oxygen_8c.html#a48a41fb879e327b83a59ee90a699836c">enter_shallow_sleep</a>()</td></tr>
<tr class="memdesc:abf8a42ed83ce38e9b1c92f1881a16c8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enter shallow sleep with the subsystem clock rate set to minimum in order to reduce power.  <a href="#abf8a42ed83ce38e9b1c92f1881a16c8f">More...</a><br /></td></tr>
<tr class="separator:abf8a42ed83ce38e9b1c92f1881a16c8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a2b5c2f71e54fb16652bf362d75af1cf2"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="../../db/dda/structdorm__cfg__t.html">dorm_cfg_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d94/dorm__private_8h.html#a2b5c2f71e54fb16652bf362d75af1cf2">dorm_cfg_t</a></td></tr>
<tr class="memdesc:a2b5c2f71e54fb16652bf362d75af1cf2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Local configuration.  <a href="#a2b5c2f71e54fb16652bf362d75af1cf2">More...</a><br /></td></tr>
<tr class="separator:a2b5c2f71e54fb16652bf362d75af1cf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1a03d1dc6044bbaab2b82903f7528d3"><td class="memItemLeft" align="right" valign="top">typedef enum <a class="el" href="../../dd/d94/dorm__private_8h.html#acc666ea4a8aad7b594ba087cbccadc6c">dorm_wake_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d94/dorm__private_8h.html#ad1a03d1dc6044bbaab2b82903f7528d3">dorm_wake_t</a></td></tr>
<tr class="memdesc:ad1a03d1dc6044bbaab2b82903f7528d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bits in dorm_wake_requested.  <a href="#ad1a03d1dc6044bbaab2b82903f7528d3">More...</a><br /></td></tr>
<tr class="separator:ad1a03d1dc6044bbaab2b82903f7528d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:acc666ea4a8aad7b594ba087cbccadc6c"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d94/dorm__private_8h.html#acc666ea4a8aad7b594ba087cbccadc6c">dorm_wake_t</a> { <a class="el" href="../../dd/d94/dorm__private_8h.html#acc666ea4a8aad7b594ba087cbccadc6ca7d2b6c1e1d66a798e9816cefe85fc2f7">DORM_WAKE_EXTERNAL</a> = 0x0001, 
<a class="el" href="../../dd/d94/dorm__private_8h.html#acc666ea4a8aad7b594ba087cbccadc6ca303d47d2197ff75a11246ab2c955726d">DORM_WAKE_TIMER</a> = 0x0002, 
<a class="el" href="../../dd/d94/dorm__private_8h.html#acc666ea4a8aad7b594ba087cbccadc6caf1dfae57b90f07641b1cdc0c274c05fb">DORM_WAKE_INTERRUPT</a> = 0x0004
 }</td></tr>
<tr class="memdesc:acc666ea4a8aad7b594ba087cbccadc6c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bits in dorm_wake_requested.  <a href="../../dd/d94/dorm__private_8h.html#acc666ea4a8aad7b594ba087cbccadc6c">More...</a><br /></td></tr>
<tr class="separator:acc666ea4a8aad7b594ba087cbccadc6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:afe8c895f0ad9efcba1a9a9111b049d73"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d94/dorm__private_8h.html#afe8c895f0ad9efcba1a9a9111b049d73">dorm_pick_clock</a> (<a class="el" href="../../d5/dd3/rtime__types_8h.html#afc21bac5ad596b618b484908da356c0c">TIME</a> *latest)</td></tr>
<tr class="memdesc:afe8c895f0ad9efcba1a9a9111b049d73"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pick the shallow or deep sleep mode.  <a href="#afe8c895f0ad9efcba1a9a9111b049d73">More...</a><br /></td></tr>
<tr class="separator:afe8c895f0ad9efcba1a9a9111b049d73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2604e4f505799c114801212e72abfa49"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d94/dorm__private_8h.html#a2604e4f505799c114801212e72abfa49">dorm_set_reduced_mmu_clock</a> (void)</td></tr>
<tr class="memdesc:a2604e4f505799c114801212e72abfa49"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the minimum rate for the MMU clock.  <a href="#a2604e4f505799c114801212e72abfa49">More...</a><br /></td></tr>
<tr class="separator:a2604e4f505799c114801212e72abfa49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae87d167b00140efd8f66f2352286f968"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d94/dorm__private_8h.html#ae87d167b00140efd8f66f2352286f968">dorm_set_full_mmu_clock</a> (void)</td></tr>
<tr class="memdesc:ae87d167b00140efd8f66f2352286f968"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the full rate for the MMU clock The "MMU clock" is the nearest thing we have to a processor clock, although it controls other things and its rate may be boosted by requests from peripherals (see <code><a class="el" href="../../d6/dac/dorm_8h.html#a76b51e91ff37389634254e971dfd9782" title="Initialise the subsystem. ">init_dorm()</a></code>).  <a href="#ae87d167b00140efd8f66f2352286f968">More...</a><br /></td></tr>
<tr class="separator:ae87d167b00140efd8f66f2352286f968"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b6da10f1b31f5690710339858218cf1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d94/dorm__private_8h.html#a0b6da10f1b31f5690710339858218cf1">dorm_wake_common</a> (void)</td></tr>
<tr class="memdesc:a0b6da10f1b31f5690710339858218cf1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Common code for waking.  <a href="#a0b6da10f1b31f5690710339858218cf1">More...</a><br /></td></tr>
<tr class="separator:a0b6da10f1b31f5690710339858218cf1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5dee4afac0d7e5b278254bb9a3798ae8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d94/dorm__private_8h.html#a5dee4afac0d7e5b278254bb9a3798ae8">dorm_hydra_check_deep_sleep</a> (<a class="el" href="../../d5/dd3/rtime__types_8h.html#afc21bac5ad596b618b484908da356c0c">TIME</a> *earliestp, <a class="el" href="../../d5/dd3/rtime__types_8h.html#afc21bac5ad596b618b484908da356c0c">TIME</a> *latestp)</td></tr>
<tr class="memdesc:a5dee4afac0d7e5b278254bb9a3798ae8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is deep sleep allowed locally?  <a href="#a5dee4afac0d7e5b278254bb9a3798ae8">More...</a><br /></td></tr>
<tr class="separator:a5dee4afac0d7e5b278254bb9a3798ae8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48a41fb879e327b83a59ee90a699836c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d94/dorm__private_8h.html#a48a41fb879e327b83a59ee90a699836c">enter_shallow_sleep</a> (void)</td></tr>
<tr class="memdesc:a48a41fb879e327b83a59ee90a699836c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enter shallow sleep Implemented in fw in asm No parameters or result.  <a href="#a48a41fb879e327b83a59ee90a699836c">More...</a><br /></td></tr>
<tr class="separator:a48a41fb879e327b83a59ee90a699836c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a86137c1c0a065eb12dabb40a9e9ece41"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/dda/structdorm__cfg__t.html">dorm_cfg_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d94/dorm__private_8h.html#a86137c1c0a065eb12dabb40a9e9ece41">dorm_cfg</a></td></tr>
<tr class="separator:a86137c1c0a065eb12dabb40a9e9ece41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa32bad3d6131d5ad8e2aca7296f9444b"><td class="memItemLeft" align="right" valign="top">volatile uint16&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d94/dorm__private_8h.html#aa32bad3d6131d5ad8e2aca7296f9444b">dorm_wake_requested</a></td></tr>
<tr class="memdesc:aa32bad3d6131d5ad8e2aca7296f9444b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flag indicating whether there is an outstanding wakeup request.  <a href="#aa32bad3d6131d5ad8e2aca7296f9444b">More...</a><br /></td></tr>
<tr class="separator:aa32bad3d6131d5ad8e2aca7296f9444b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25e9cd8ebd90ed2e31df2fea613f5897"><td class="memItemLeft" align="right" valign="top">uint32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d94/dorm__private_8h.html#a25e9cd8ebd90ed2e31df2fea613f5897">shallow_sleep_clk_div</a></td></tr>
<tr class="memdesc:a25e9cd8ebd90ed2e31df2fea613f5897"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global defined in interrupt.asm that lets us divide down the subsystem clock when entering shallow sleep.  <a href="#a25e9cd8ebd90ed2e31df2fea613f5897">More...</a><br /></td></tr>
<tr class="separator:a25e9cd8ebd90ed2e31df2fea613f5897"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Private header for the Hydra dorm module. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a216038fc9e6599475362db7609f22ddd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a216038fc9e6599475362db7609f22ddd">&#9670;&nbsp;</a></span>DEEP_SLEEP_MIN_TIME</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEEP_SLEEP_MIN_TIME&#160;&#160;&#160;(10 * <a class="el" href="../../d7/d66/haltime_8h.html#a6f1e731907521317e8a272d5ae57364e">MILLISECOND</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The minimum time for which it's worth doing deep sleep signalling. </p>
<p>This is supposed to be short enough that we won't be prevented from deep sleep any time it's going to make a significant difference to power saving, and long enough that we won't waste time with a lot of pointless signalling on short periods. However, opinions may differ. </p>

</div>
</div>
<a id="aea9588e5708e3518f19e2f5d9f585c46"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea9588e5708e3518f19e2f5d9f585c46">&#9670;&nbsp;</a></span>DORM_CONST</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DORM_CONST&#160;&#160;&#160;const</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a12b0b52fac12d322fbd3892b9d018cfa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12b0b52fac12d322fbd3892b9d018cfa">&#9670;&nbsp;</a></span>DORM_EARLIEST_WAKEUP_TIME_NO_DEADLINE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DORM_EARLIEST_WAKEUP_TIME_NO_DEADLINE&#160;&#160;&#160;(1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Special wake up times used to request sleep with no deadline. </p>
<p>Wake time has type uint32 and contains system microsecond clock time. The 32 bit microsecond timer wraps every 4294 seconds or 71.58 minutes. Below values have been carefully selected by taking into consideration that wake up times with deadline will never have (2^32-1) difference between earliest and latest. Note: These values are meant to be used by dorm module for IPC messaging between P1 and P0. Other modules requesting sleep with no deadline should use <code>dorm_sleep_no_deadline()</code> instead of using these values. </p>

</div>
</div>
<a id="a576548bb524b75a1327c4bb57338b61e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a576548bb524b75a1327c4bb57338b61e">&#9670;&nbsp;</a></span>DORM_ENTER_CRITICAL_SECTION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DORM_ENTER_CRITICAL_SECTION</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;block_interrupt_levels(INT_LEVELS)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>In addition to preventing a race with the other processor setting a different minimum CPU rate, we need to be careful in case the foreground has told us not to enter shallow sleep. </p>
<p>Hence we need to lock out the foreground of the local processor, too. </p>

</div>
</div>
<a id="a63cb60b5824bd047da389f24ac5a89b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63cb60b5824bd047da389f24ac5a89b1">&#9670;&nbsp;</a></span>DORM_LATEST_WAKEUP_TIME_NO_DEADLINE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DORM_LATEST_WAKEUP_TIME_NO_DEADLINE&#160;&#160;&#160;(0)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a783253d029a0ecca55cc020cab8b4f1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a783253d029a0ecca55cc020cab8b4f1d">&#9670;&nbsp;</a></span>DORM_LEAVE_CRITICAL_SECTION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DORM_LEAVE_CRITICAL_SECTION</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;unblock_interrupt_levels(INT_LEVELS)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aad1624457b7f9e46e9078d81b6b28f0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad1624457b7f9e46e9078d81b6b28f0d">&#9670;&nbsp;</a></span>DORM_STATIC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DORM_STATIC&#160;&#160;&#160;static</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="abf8a42ed83ce38e9b1c92f1881a16c8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf8a42ed83ce38e9b1c92f1881a16c8f">&#9670;&nbsp;</a></span>enter_shallow_sleep_with_reduced_clock</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define enter_shallow_sleep_with_reduced_clock</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="../../db/dfb/sched__oxygen_8c.html#a48a41fb879e327b83a59ee90a699836c">enter_shallow_sleep</a>()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enter shallow sleep with the subsystem clock rate set to minimum in order to reduce power. </p>
<p>P0 is responsible for the clock divider register so on P1 this is just the normal shallow sleep entry. </p>

</div>
</div>
<a id="a0e33941adab5bfc49e3520a4d8256cbf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e33941adab5bfc49e3520a4d8256cbf">&#9670;&nbsp;</a></span>FULL_MMU_RATE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FULL_MMU_RATE&#160;&#160;&#160;<a class="el" href="../../dd/d94/dorm__private_8h.html#a976b360d529e4b1917457c5219295567">FULL_MMU_RATE_DEFAULT</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a976b360d529e4b1917457c5219295567"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a976b360d529e4b1917457c5219295567">&#9670;&nbsp;</a></span>FULL_MMU_RATE_DEFAULT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FULL_MMU_RATE_DEFAULT&#160;&#160;&#160;(0U)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Full ungated MMU clock rate as supplied to the subsystem. </p>

</div>
</div>
<a id="a4277d6ae1af9ccc866e0465555ea2cfb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4277d6ae1af9ccc866e0465555ea2cfb">&#9670;&nbsp;</a></span>IO_DEFS_MODULE_CHIP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IO_DEFS_MODULE_CHIP&#160;&#160;&#160;/* An again */</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a88d3c2a64c0ebec3f2000ef28c429763"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88d3c2a64c0ebec3f2000ef28c429763">&#9670;&nbsp;</a></span>MIN_MMU_RATE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN_MMU_RATE&#160;&#160;&#160;<a class="el" href="../../dd/d94/dorm__private_8h.html#a166bf98e6309489869b3136432136315">MIN_MMU_RATE_DEFAULT</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a166bf98e6309489869b3136432136315"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a166bf98e6309489869b3136432136315">&#9670;&nbsp;</a></span>MIN_MMU_RATE_DEFAULT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN_MMU_RATE_DEFAULT&#160;&#160;&#160;(255U /* MMU_FULL / ((127 &lt;&lt; 4) + 1) MHz */)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Other values of min_mmu_rate are used directly in the hardware. </p>
<p>They indicate the number of cycles gated off in every full clock cycle. Hence the corresponding clock rate is full clock / (1 + min_mmu_rate). If bit 7 is set, the remaining value is multiplied by 16 for extra slowness. </p>

</div>
</div>
<a id="a5fccf524d2c5491693d15dad9dfc897a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5fccf524d2c5491693d15dad9dfc897a">&#9670;&nbsp;</a></span>MMU_RATE_DEEP_SLEEP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MMU_RATE_DEEP_SLEEP&#160;&#160;&#160;(0xffff)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Value stored in shared.dorm[].min_mmu_rate to indicated deep sleep. </p>

</div>
</div>
<a id="af44daaa65bbc339a32ea8c64a597ff7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af44daaa65bbc339a32ea8c64a597ff7f">&#9670;&nbsp;</a></span>REDUCED_MMU_RATE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define REDUCED_MMU_RATE&#160;&#160;&#160;<a class="el" href="../../dd/d94/dorm__private_8h.html#ac7667b4c3a9419f5781bcd8a3f04f079">REDUCED_MMU_RATE_DEFAULT</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac7667b4c3a9419f5781bcd8a3f04f079"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7667b4c3a9419f5781bcd8a3f04f079">&#9670;&nbsp;</a></span>REDUCED_MMU_RATE_DEFAULT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define REDUCED_MMU_RATE_DEFAULT&#160;&#160;&#160;(5U)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Special rate used when full shallow sleep is not appropriate. </p>

</div>
</div>
<a id="a4552323385a8eccf9e71097e4062e258"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4552323385a8eccf9e71097e4062e258">&#9670;&nbsp;</a></span>SHALLOW_SLEEP_CLKGEN_CORE_CLK_RATE_VALUE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SHALLOW_SLEEP_CLKGEN_CORE_CLK_RATE_VALUE&#160;&#160;&#160;15</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum divider value for register CLKGEN_CORE_CLK_RATE for reducing the subsystem clock to save power. </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a2b5c2f71e54fb16652bf362d75af1cf2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b5c2f71e54fb16652bf362d75af1cf2">&#9670;&nbsp;</a></span>dorm_cfg_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="../../db/dda/structdorm__cfg__t.html">dorm_cfg_t</a>  <a class="el" href="../../db/dda/structdorm__cfg__t.html">dorm_cfg_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Local configuration. </p>

</div>
</div>
<a id="ad1a03d1dc6044bbaab2b82903f7528d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1a03d1dc6044bbaab2b82903f7528d3">&#9670;&nbsp;</a></span>dorm_wake_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef enum <a class="el" href="../../dd/d94/dorm__private_8h.html#acc666ea4a8aad7b594ba087cbccadc6c">dorm_wake_t</a>  <a class="el" href="../../dd/d94/dorm__private_8h.html#acc666ea4a8aad7b594ba087cbccadc6c">dorm_wake_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Bits in dorm_wake_requested. </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="acc666ea4a8aad7b594ba087cbccadc6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc666ea4a8aad7b594ba087cbccadc6c">&#9670;&nbsp;</a></span>dorm_wake_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../dd/d94/dorm__private_8h.html#acc666ea4a8aad7b594ba087cbccadc6c">dorm_wake_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Bits in dorm_wake_requested. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="acc666ea4a8aad7b594ba087cbccadc6ca7d2b6c1e1d66a798e9816cefe85fc2f7"></a>DORM_WAKE_EXTERNAL&#160;</td><td class="fielddoc"><p>Someone outside dorm wants us to wake. </p>
</td></tr>
<tr><td class="fieldname"><a id="acc666ea4a8aad7b594ba087cbccadc6ca303d47d2197ff75a11246ab2c955726d"></a>DORM_WAKE_TIMER&#160;</td><td class="fielddoc"><p>Dorm's own timer went off. </p>
</td></tr>
<tr><td class="fieldname"><a id="acc666ea4a8aad7b594ba087cbccadc6caf1dfae57b90f07641b1cdc0c274c05fb"></a>DORM_WAKE_INTERRUPT&#160;</td><td class="fielddoc"><p>An interrupt caused us to wake the background. </p>
<p>We don't necessarily want to leave dorm, however (depending whether DORM_WAKE_EXTERNAL is also set). </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a5dee4afac0d7e5b278254bb9a3798ae8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5dee4afac0d7e5b278254bb9a3798ae8">&#9670;&nbsp;</a></span>dorm_hydra_check_deep_sleep()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool dorm_hydra_check_deep_sleep </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dd3/rtime__types_8h.html#afc21bac5ad596b618b484908da356c0c">TIME</a> *&#160;</td>
          <td class="paramname"><em>earliestp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/dd3/rtime__types_8h.html#afc21bac5ad596b618b484908da356c0c">TIME</a> *&#160;</td>
          <td class="paramname"><em>latestp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Is deep sleep allowed locally? </p>
<p>See if we can enter deep sleep, passing our times to the Curator if necessary. This function calls <code>subsleep_ready()</code>, so on a <code>TRUE</code> return we need to call the other subsleep messages in sequence. The times are passed in as pointers in case the function wishes to change them.</p>
<p>*</p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">earliestp</td><td>is a pointer to the earliest time we'd like to be woken, not counting asynchronous wakes.</td></tr>
  </table>
  </dd>
</dl>
<p>*</p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">latestp</td><td>is the time by which we require to be woken. As this is background code, some slop is allowed in waking.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TRUE if we can enter deep sleep, else FALSE. </dd></dl>

</div>
</div>
<a id="afe8c895f0ad9efcba1a9a9111b049d73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe8c895f0ad9efcba1a9a9111b049d73">&#9670;&nbsp;</a></span>dorm_pick_clock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dorm_pick_clock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dd3/rtime__types_8h.html#afc21bac5ad596b618b484908da356c0c">TIME</a> *&#160;</td>
          <td class="paramname"><em>latest</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pick the shallow or deep sleep mode. </p>
<p>Chooses the minimum clock rate for the current processor. latest is the background wake up time; this will be combined with the itime wakeup time to get the earliest wakeup for deep sleep. </p>

</div>
</div>
<a id="ae87d167b00140efd8f66f2352286f968"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae87d167b00140efd8f66f2352286f968">&#9670;&nbsp;</a></span>dorm_set_full_mmu_clock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dorm_set_full_mmu_clock </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the full rate for the MMU clock The "MMU clock" is the nearest thing we have to a processor clock, although it controls other things and its rate may be boosted by requests from peripherals (see <code><a class="el" href="../../d6/dac/dorm_8h.html#a76b51e91ff37389634254e971dfd9782" title="Initialise the subsystem. ">init_dorm()</a></code>). </p>
<p>When either CPU is in action, we always use the full clock rate. There is typically nothing to be gained by performing any activity more slowly than the full rate since it just takes longer. There is no race with the other processor when setting full rate as long as we advise the other processor first that we need it.</p>
<p>Note this function needs to be called after <code><a class="el" href="../../dd/d94/dorm__private_8h.html#afe8c895f0ad9efcba1a9a9111b049d73" title="Pick the shallow or deep sleep mode. ">dorm_pick_clock()</a></code> even if <code><a class="el" href="../../dd/d94/dorm__private_8h.html#a2604e4f505799c114801212e72abfa49" title="Set the minimum rate for the MMU clock. ">dorm_set_reduced_mmu_clock()</a></code> was never called, in order to restore the current CPU's notion of the clock speed as seen by the other CPU. </p>

</div>
</div>
<a id="a2604e4f505799c114801212e72abfa49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2604e4f505799c114801212e72abfa49">&#9670;&nbsp;</a></span>dorm_set_reduced_mmu_clock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dorm_set_reduced_mmu_clock </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the minimum rate for the MMU clock. </p>
<p>This is as in <code>dorm_cfg.min_mmu_rate</code>.</p>
<p>The "MMU clock" is the nearest thing we have to a processor clock, although it controls other things and its rate may be boosted by requests from peripherals (see init_dorm).</p>
<p>This code requires the foreground to be locked out since that may request a maximum clock and we don't then want to reduce it.</p>
<p>We never reduce the maximum clock rate, since that doesn't gain anything either. </p>

</div>
</div>
<a id="a0b6da10f1b31f5690710339858218cf1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b6da10f1b31f5690710339858218cf1">&#9670;&nbsp;</a></span>dorm_wake_common()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dorm_wake_common </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Common code for waking. </p>
<p>Used internally inside dorm for waking. The caller must set appropriate bits in <code>dorm_wake_requested</code> indicating the nature of the wakeup. </p>

</div>
</div>
<a id="a48a41fb879e327b83a59ee90a699836c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48a41fb879e327b83a59ee90a699836c">&#9670;&nbsp;</a></span>enter_shallow_sleep()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void enter_shallow_sleep </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enter shallow sleep Implemented in fw in asm No parameters or result. </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a86137c1c0a065eb12dabb40a9e9ece41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86137c1c0a065eb12dabb40a9e9ece41">&#9670;&nbsp;</a></span>dorm_cfg</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/dda/structdorm__cfg__t.html">dorm_cfg_t</a> dorm_cfg</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aa32bad3d6131d5ad8e2aca7296f9444b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa32bad3d6131d5ad8e2aca7296f9444b">&#9670;&nbsp;</a></span>dorm_wake_requested</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint16 dorm_wake_requested</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flag indicating whether there is an outstanding wakeup request. </p>
<p>This is set in the foreground, hence is volatile. Although reads and writes to the variable as a whole are atomic the background needs to be careful handling individual bits. </p>

</div>
</div>
<a id="a25e9cd8ebd90ed2e31df2fea613f5897"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25e9cd8ebd90ed2e31df2fea613f5897">&#9670;&nbsp;</a></span>shallow_sleep_clk_div</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32 shallow_sleep_clk_div</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Global defined in interrupt.asm that lets us divide down the subsystem clock when entering shallow sleep. </p>
<p>This has to be coordinated with other users of the clock such as the other processor and things such as USB that need fast access to Apps memory. The deep sleep entry point coordinates these since it is only reached when both processors have no work and it isn't used when the USB transport is active. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.14-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_9104b11b055a08855e18ab07d1360a34.html">apps_ext_adk64r_RC_CI_qcc512x_qcc302x_1908091004</a></li><li class="navelem"><a class="el" href="../../dir_19c4644e84b768df42bf93899dbb4e83.html">apps_package</a></li><li class="navelem"><a class="el" href="../../dir_e9f51238b5eab91050ba7b42263dc658.html">progfiles</a></li><li class="navelem"><a class="el" href="../../dir_86fefe393b7ca9a63838560cf4ca04cf.html">apps</a></li><li class="navelem"><a class="el" href="../../dir_240681f6dc407f95ae9103d80499b5b4.html">fw</a></li><li class="navelem"><a class="el" href="../../dir_67a3fc20251395f7d62aa73621d4d7c9.html">src</a></li><li class="navelem"><a class="el" href="../../dir_721b2a6acf65b21a05ec9c4de6b97c06.html">core</a></li><li class="navelem"><a class="el" href="../../dir_7a869d471028fb01af742c581b796427.html">dorm</a></li><li class="navelem"><a class="el" href="../../dd/d94/dorm__private_8h.html">dorm_private.h</a></li>
    <li class="footer">Copyright (c) 2019 Qualcomm Technologies International, Ltd. Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
