<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OS: pmalloc_private.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OS
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d6/d9d/pmalloc__private_8h.html','../../');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">pmalloc_private.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Internal header file for the private memory allocator.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../d8/ddb/pmalloc_8h_source.html">pmalloc/pmalloc.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/dd9/hydra__types_8h_source.html">hydra/hydra_types.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../de/d69/hydra__macros_8h_source.html">hydra/hydra_macros.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../da/d67/hydra__log_8h_source.html">hydra_log/hydra_log.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/d7e/int_8h_source.html">int/int.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../df/d1f/panic_8h_source.html">panic/panic.h</a>&quot;</code><br />
<code>#include &quot;memory_map.h&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dd/d19/pmalloc__debug_8h_source.html">pmalloc/pmalloc_debug.h</a>&quot;</code><br />
</div>
<p><a href="../../d6/d9d/pmalloc__private_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d0f/structpmalloc__align__test.html">pmalloc_align_test</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Required alignment in multiples of location size (this is 1 for the Xap2, and 4 for most other modern processors that support byte addressing but require 32bit values to be quad-byte aligned)  <a href="../../d1/d0f/structpmalloc__align__test.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d05/structpmalloc__pool.html">pmalloc_pool</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Control block for a pool of blocks of the same size.  <a href="../../d4/d05/structpmalloc__pool.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ada48a40a16126418504c6912968e01e5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9d/pmalloc__private_8h.html#ada48a40a16126418504c6912968e01e5">PMALLOC_RESOURCE_SIZE</a>&#160;&#160;&#160;(16 * sizeof(uint16) + 2 * sizeof(void *))</td></tr>
<tr class="memdesc:ada48a40a16126418504c6912968e01e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resource management thresholds and status.  <a href="#ada48a40a16126418504c6912968e01e5">More...</a><br /></td></tr>
<tr class="separator:ada48a40a16126418504c6912968e01e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a977dfe9aca09e7a344c6dbc475fcc8c9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9d/pmalloc__private_8h.html#a977dfe9aca09e7a344c6dbc475fcc8c9">PMALLOC_RESOURCE_LOW</a>&#160;&#160;&#160;(20)</td></tr>
<tr class="separator:a977dfe9aca09e7a344c6dbc475fcc8c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c86d9b614e1895e8601dfa4b5eb88c1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9d/pmalloc__private_8h.html#a5c86d9b614e1895e8601dfa4b5eb88c1">PMALLOC_RESOURCE_CRITICAL</a>&#160;&#160;&#160;(10)</td></tr>
<tr class="separator:a5c86d9b614e1895e8601dfa4b5eb88c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af407253d4ced0c935e803f98ef4909aa"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9d/pmalloc__private_8h.html#af407253d4ced0c935e803f98ef4909aa">PMALLOC_ALIGN_BOUNDARY</a>&#160;&#160;&#160;(offsetof(<a class="el" href="../../d1/d0f/structpmalloc__align__test.html">pmalloc_align_test</a>, a))</td></tr>
<tr class="separator:af407253d4ced0c935e803f98ef4909aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa07abbb5bd72b1c714aaf954e5aa8f07"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9d/pmalloc__private_8h.html#aa07abbb5bd72b1c714aaf954e5aa8f07">PMALLOC_ALIGN</a>(p)</td></tr>
<tr class="memdesc:aa07abbb5bd72b1c714aaf954e5aa8f07"><td class="mdescLeft">&#160;</td><td class="mdescRight">Round a pointer to the next alignment boundary.  <a href="#aa07abbb5bd72b1c714aaf954e5aa8f07">More...</a><br /></td></tr>
<tr class="separator:aa07abbb5bd72b1c714aaf954e5aa8f07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abda625daf00c1aee63e28f2fb9c49910"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9d/pmalloc__private_8h.html#abda625daf00c1aee63e28f2fb9c49910">PMALLOC_MIN_BLOCK</a>&#160;&#160;&#160;MIN(<a class="el" href="../../d6/d9d/pmalloc__private_8h.html#af407253d4ced0c935e803f98ef4909aa">PMALLOC_ALIGN_BOUNDARY</a>, sizeof(void *))</td></tr>
<tr class="memdesc:abda625daf00c1aee63e28f2fb9c49910"><td class="mdescLeft">&#160;</td><td class="mdescRight">Range of allowed block sizes.  <a href="#abda625daf00c1aee63e28f2fb9c49910">More...</a><br /></td></tr>
<tr class="separator:abda625daf00c1aee63e28f2fb9c49910"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfa921adbf0d1127c0297fb39cf9666e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9d/pmalloc__private_8h.html#adfa921adbf0d1127c0297fb39cf9666e">PMALLOC_MAX_BLOCK</a>&#160;&#160;&#160;(2048)</td></tr>
<tr class="separator:adfa921adbf0d1127c0297fb39cf9666e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd00bf9f90650b01f9fc2cbf9b736165"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9d/pmalloc__private_8h.html#acd00bf9f90650b01f9fc2cbf9b736165">PMALLOC_BEGIN</a>&#160;&#160;&#160;((void *) <a class="el" href="../../d8/ddb/pmalloc_8h.html#aaa7c00334b681c729d901a8875c0e451">pmalloc_begin</a>)</td></tr>
<tr class="separator:acd00bf9f90650b01f9fc2cbf9b736165"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3817e1d7bdc03e7250c01e308bf91a9e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9d/pmalloc__private_8h.html#a3817e1d7bdc03e7250c01e308bf91a9e">PMALLOC_END</a>&#160;&#160;&#160;((void *) <a class="el" href="../../d8/ddb/pmalloc_8h.html#a073b3d43bae22944f5716e2bc21c5e30">pmalloc_end</a>)</td></tr>
<tr class="separator:a3817e1d7bdc03e7250c01e308bf91a9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4f907537009ac37d8a30250c047658d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9d/pmalloc__private_8h.html#ad4f907537009ac37d8a30250c047658d">PMALLOC_BLOCK_INTERRUPTS</a>()&#160;&#160;&#160;<a class="el" href="../../d3/d7e/int_8h.html#a14cb2d707ef3a103b9107918db4001b9">block_interrupts</a>();</td></tr>
<tr class="memdesc:ad4f907537009ac37d8a30250c047658d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mechanism used to block interrupts when atomic access is required to pool control blocks.  <a href="#ad4f907537009ac37d8a30250c047658d">More...</a><br /></td></tr>
<tr class="separator:ad4f907537009ac37d8a30250c047658d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a179e82675141a5d5790ddc0d627be955"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9d/pmalloc__private_8h.html#a179e82675141a5d5790ddc0d627be955">PMALLOC_UNBLOCK_INTERRUPTS</a>()&#160;&#160;&#160;<a class="el" href="../../d3/d7e/int_8h.html#aaead1ea46c26e93f434800b0dd6565e7">unblock_interrupts</a>();</td></tr>
<tr class="separator:a179e82675141a5d5790ddc0d627be955"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a2b5518e8970621e220c91b05b5c7a8d7"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="../../d1/d0f/structpmalloc__align__test.html">pmalloc_align_test</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9d/pmalloc__private_8h.html#a2b5518e8970621e220c91b05b5c7a8d7">pmalloc_align_test</a></td></tr>
<tr class="memdesc:a2b5518e8970621e220c91b05b5c7a8d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Required alignment in multiples of location size (this is 1 for the Xap2, and 4 for most other modern processors that support byte addressing but require 32bit values to be quad-byte aligned)  <a href="#a2b5518e8970621e220c91b05b5c7a8d7">More...</a><br /></td></tr>
<tr class="separator:a2b5518e8970621e220c91b05b5c7a8d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c92db4bf1b5f16cbcf40d66cdeaeb5f"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="../../d4/d05/structpmalloc__pool.html">pmalloc_pool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9d/pmalloc__private_8h.html#a7c92db4bf1b5f16cbcf40d66cdeaeb5f">pmalloc_pool</a></td></tr>
<tr class="memdesc:a7c92db4bf1b5f16cbcf40d66cdeaeb5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Control block for a pool of blocks of the same size.  <a href="#a7c92db4bf1b5f16cbcf40d66cdeaeb5f">More...</a><br /></td></tr>
<tr class="separator:a7c92db4bf1b5f16cbcf40d66cdeaeb5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a65eb685727275733742b580f8743f073"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9d/pmalloc__private_8h.html#a65eb685727275733742b580f8743f073">prightsize</a> (const void *ptr, size_t size)</td></tr>
<tr class="memdesc:a65eb685727275733742b580f8743f073"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hide the myriad of debugging options in a separate file (must be included after the data structures have been declared)  <a href="#a65eb685727275733742b580f8743f073">More...</a><br /></td></tr>
<tr class="separator:a65eb685727275733742b580f8743f073"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab614a28798d8c71184e2427227d89b7e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9d/pmalloc__private_8h.html#ab614a28798d8c71184e2427227d89b7e">get_pmalloc_config</a> (<a class="el" href="../../da/d62/structpmalloc__pool__config.html">pmalloc_pool_config</a> *pool_config, unsigned *pool_config_len)</td></tr>
<tr class="memdesc:ab614a28798d8c71184e2427227d89b7e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct fixed pool memory allocation configuration, based on summing the contributions from known sources defined in pmalloc_config_P0 or <a class="el" href="../../d3/d4d/pmalloc__config__P1_8h.html" title="Internal header file holding the fixed pool configurations known for each subsystem on processor P1 b...">pmalloc_config_P1.h</a> depending on compile-flags Partition the memory into pools based on "configuration".  <a href="#ab614a28798d8c71184e2427227d89b7e">More...</a><br /></td></tr>
<tr class="separator:ab614a28798d8c71184e2427227d89b7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a382b7447e25751cb4a5ee5d3e0e74264"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9d/pmalloc__private_8h.html#a382b7447e25751cb4a5ee5d3e0e74264">pmalloc_configure</a> (<a class="el" href="../../da/d62/structpmalloc__pool__config.html">pmalloc_pool_config</a> *pool_config, unsigned pool_config_len)</td></tr>
<tr class="memdesc:a382b7447e25751cb4a5ee5d3e0e74264"><td class="mdescLeft">&#160;</td><td class="mdescRight">Partition the memory into pools based on "configuration".  <a href="#a382b7447e25751cb4a5ee5d3e0e74264">More...</a><br /></td></tr>
<tr class="separator:a382b7447e25751cb4a5ee5d3e0e74264"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ae3f81af67faaa99ff0ffba5e50a25955"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9d/pmalloc__private_8h.html#ae3f81af67faaa99ff0ffba5e50a25955">pmalloc_app_begin</a></td></tr>
<tr class="memdesc:ae3f81af67faaa99ff0ffba5e50a25955"><td class="mdescLeft">&#160;</td><td class="mdescRight">Address range to be used for the private memory pool, including all dynamically allocated control and tracing structures (the implementation may change for different targets, so always use the PMALLOC_ versions)  <a href="#ae3f81af67faaa99ff0ffba5e50a25955">More...</a><br /></td></tr>
<tr class="separator:ae3f81af67faaa99ff0ffba5e50a25955"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b64024a396f762165ceb6f703e3b524"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9d/pmalloc__private_8h.html#a7b64024a396f762165ceb6f703e3b524">pmalloc_app_end</a></td></tr>
<tr class="separator:a7b64024a396f762165ceb6f703e3b524"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a667d072910a1697eb6b81fb3a3297afe"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9d/pmalloc__private_8h.html#a667d072910a1697eb6b81fb3a3297afe">pmalloc_app_size</a></td></tr>
<tr class="separator:a667d072910a1697eb6b81fb3a3297afe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a4950832f2f1c92d846c47e68a3cb22"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9d/pmalloc__private_8h.html#a3a4950832f2f1c92d846c47e68a3cb22">pmalloc_num_pools</a></td></tr>
<tr class="memdesc:a3a4950832f2f1c92d846c47e68a3cb22"><td class="mdescLeft">&#160;</td><td class="mdescRight">Array of pool control blocks.  <a href="#a3a4950832f2f1c92d846c47e68a3cb22">More...</a><br /></td></tr>
<tr class="separator:a3a4950832f2f1c92d846c47e68a3cb22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3afa3b04f478f08b744f17d648066601"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d05/structpmalloc__pool.html">pmalloc_pool</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9d/pmalloc__private_8h.html#a3afa3b04f478f08b744f17d648066601">pmalloc_pools</a></td></tr>
<tr class="separator:a3afa3b04f478f08b744f17d648066601"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a616db61c3de33e4ceac9bf01de9ec1d8"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9d/pmalloc__private_8h.html#a616db61c3de33e4ceac9bf01de9ec1d8">pmalloc_blocks</a></td></tr>
<tr class="memdesc:a616db61c3de33e4ceac9bf01de9ec1d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to the first block in the first pool.  <a href="#a616db61c3de33e4ceac9bf01de9ec1d8">More...</a><br /></td></tr>
<tr class="separator:a616db61c3de33e4ceac9bf01de9ec1d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Internal header file for the private memory allocator. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="aa07abbb5bd72b1c714aaf954e5aa8f07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa07abbb5bd72b1c714aaf954e5aa8f07">&#9670;&nbsp;</a></span>PMALLOC_ALIGN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PMALLOC_ALIGN</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">p</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">((<span class="keywordtype">void</span> *) (<span class="keywordtype">char</span> *) ((((size_t) (<span class="keywordtype">char</span> *) (p)) \</div><div class="line">                         + (<a class="code" href="../../d6/d9d/pmalloc__private_8h.html#af407253d4ced0c935e803f98ef4909aa">PMALLOC_ALIGN_BOUNDARY</a> - 1)) \</div><div class="line">                        &amp; (size_t) ~((ptrdiff_t) \</div><div class="line">                                     (<a class="code" href="../../d6/d9d/pmalloc__private_8h.html#af407253d4ced0c935e803f98ef4909aa">PMALLOC_ALIGN_BOUNDARY</a> - 1))))</div><div class="ttc" id="pmalloc__private_8h_html_af407253d4ced0c935e803f98ef4909aa"><div class="ttname"><a href="../../d6/d9d/pmalloc__private_8h.html#af407253d4ced0c935e803f98ef4909aa">PMALLOC_ALIGN_BOUNDARY</a></div><div class="ttdeci">#define PMALLOC_ALIGN_BOUNDARY</div><div class="ttdef"><b>Definition:</b> pmalloc_private.h:49</div></div>
</div><!-- fragment -->
<p>Round a pointer to the next alignment boundary. </p>

</div>
</div>
<a id="af407253d4ced0c935e803f98ef4909aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af407253d4ced0c935e803f98ef4909aa">&#9670;&nbsp;</a></span>PMALLOC_ALIGN_BOUNDARY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PMALLOC_ALIGN_BOUNDARY&#160;&#160;&#160;(offsetof(<a class="el" href="../../d1/d0f/structpmalloc__align__test.html">pmalloc_align_test</a>, a))</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="acd00bf9f90650b01f9fc2cbf9b736165"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd00bf9f90650b01f9fc2cbf9b736165">&#9670;&nbsp;</a></span>PMALLOC_BEGIN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PMALLOC_BEGIN&#160;&#160;&#160;((void *) <a class="el" href="../../d8/ddb/pmalloc_8h.html#aaa7c00334b681c729d901a8875c0e451">pmalloc_begin</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ad4f907537009ac37d8a30250c047658d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4f907537009ac37d8a30250c047658d">&#9670;&nbsp;</a></span>PMALLOC_BLOCK_INTERRUPTS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PMALLOC_BLOCK_INTERRUPTS</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="../../d3/d7e/int_8h.html#a14cb2d707ef3a103b9107918db4001b9">block_interrupts</a>();</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Mechanism used to block interrupts when atomic access is required to pool control blocks. </p>

</div>
</div>
<a id="a3817e1d7bdc03e7250c01e308bf91a9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3817e1d7bdc03e7250c01e308bf91a9e">&#9670;&nbsp;</a></span>PMALLOC_END</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PMALLOC_END&#160;&#160;&#160;((void *) <a class="el" href="../../d8/ddb/pmalloc_8h.html#a073b3d43bae22944f5716e2bc21c5e30">pmalloc_end</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="adfa921adbf0d1127c0297fb39cf9666e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfa921adbf0d1127c0297fb39cf9666e">&#9670;&nbsp;</a></span>PMALLOC_MAX_BLOCK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PMALLOC_MAX_BLOCK&#160;&#160;&#160;(2048)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="abda625daf00c1aee63e28f2fb9c49910"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abda625daf00c1aee63e28f2fb9c49910">&#9670;&nbsp;</a></span>PMALLOC_MIN_BLOCK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PMALLOC_MIN_BLOCK&#160;&#160;&#160;MIN(<a class="el" href="../../d6/d9d/pmalloc__private_8h.html#af407253d4ced0c935e803f98ef4909aa">PMALLOC_ALIGN_BOUNDARY</a>, sizeof(void *))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Range of allowed block sizes. </p>
<p>Blocks smaller than the minimum size are enlarged, and blocks larger than the maximum size are rejected. Both of these tests are performed when the pools are initialised. </p>

</div>
</div>
<a id="a5c86d9b614e1895e8601dfa4b5eb88c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c86d9b614e1895e8601dfa4b5eb88c1">&#9670;&nbsp;</a></span>PMALLOC_RESOURCE_CRITICAL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PMALLOC_RESOURCE_CRITICAL&#160;&#160;&#160;(10)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a977dfe9aca09e7a344c6dbc475fcc8c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a977dfe9aca09e7a344c6dbc475fcc8c9">&#9670;&nbsp;</a></span>PMALLOC_RESOURCE_LOW</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PMALLOC_RESOURCE_LOW&#160;&#160;&#160;(20)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ada48a40a16126418504c6912968e01e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada48a40a16126418504c6912968e01e5">&#9670;&nbsp;</a></span>PMALLOC_RESOURCE_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PMALLOC_RESOURCE_SIZE&#160;&#160;&#160;(16 * sizeof(uint16) + 2 * sizeof(void *))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resource management thresholds and status. </p>
<p>(based on ability to allocate doubly linked list of MA-UNITDATA.request) </p>

</div>
</div>
<a id="a179e82675141a5d5790ddc0d627be955"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a179e82675141a5d5790ddc0d627be955">&#9670;&nbsp;</a></span>PMALLOC_UNBLOCK_INTERRUPTS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PMALLOC_UNBLOCK_INTERRUPTS</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="../../d3/d7e/int_8h.html#aaead1ea46c26e93f434800b0dd6565e7">unblock_interrupts</a>();</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a2b5518e8970621e220c91b05b5c7a8d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b5518e8970621e220c91b05b5c7a8d7">&#9670;&nbsp;</a></span>pmalloc_align_test</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="../../d1/d0f/structpmalloc__align__test.html">pmalloc_align_test</a>  <a class="el" href="../../d1/d0f/structpmalloc__align__test.html">pmalloc_align_test</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Required alignment in multiples of location size (this is 1 for the Xap2, and 4 for most other modern processors that support byte addressing but require 32bit values to be quad-byte aligned) </p>

</div>
</div>
<a id="a7c92db4bf1b5f16cbcf40d66cdeaeb5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c92db4bf1b5f16cbcf40d66cdeaeb5f">&#9670;&nbsp;</a></span>pmalloc_pool</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="../../d4/d05/structpmalloc__pool.html">pmalloc_pool</a>  <a class="el" href="../../d4/d05/structpmalloc__pool.html">pmalloc_pool</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Control block for a pool of blocks of the same size. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ab614a28798d8c71184e2427227d89b7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab614a28798d8c71184e2427227d89b7e">&#9670;&nbsp;</a></span>get_pmalloc_config()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool get_pmalloc_config </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../da/d62/structpmalloc__pool__config.html">pmalloc_pool_config</a> *&#160;</td>
          <td class="paramname"><em>pool_config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned *&#160;</td>
          <td class="paramname"><em>pool_config_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Construct fixed pool memory allocation configuration, based on summing the contributions from known sources defined in pmalloc_config_P0 or <a class="el" href="../../d3/d4d/pmalloc__config__P1_8h.html" title="Internal header file holding the fixed pool configurations known for each subsystem on processor P1 b...">pmalloc_config_P1.h</a> depending on compile-flags Partition the memory into pools based on "configuration". </p>
<p>Then allocate the remaining heap to the given pools Doesn't set up the pool control blocks at this stage</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pool_config</td><td>list of block-size (0 = unused), block-num pairs </td></tr>
    <tr><td class="paramname">pool_config_len</td><td>length of non-zero entries in pool_config </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TRUE if there was sufficient space in the heap to fit the configured pools, otherwise FALSE</dd></dl>
<p>Construct fixed pool memory allocation configuration, based on summing the contributions from known sources defined in pmalloc_config_P0 or <a class="el" href="../../d3/d4d/pmalloc__config__P1_8h.html" title="Internal header file holding the fixed pool configurations known for each subsystem on processor P1 b...">pmalloc_config_P1.h</a> depending on compile-flags Partition the memory into pools based on "configuration".</p>
<p>Combine them if required, then allocate any remaining heap memory to the pool configuration too.</p>
<p>Returns true if successful, otherwise false. pool_config_len updated with number of entries in pool_config. </p>

</div>
</div>
<a id="a382b7447e25751cb4a5ee5d3e0e74264"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a382b7447e25751cb4a5ee5d3e0e74264">&#9670;&nbsp;</a></span>pmalloc_configure()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pmalloc_configure </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../da/d62/structpmalloc__pool__config.html">pmalloc_pool_config</a> *&#160;</td>
          <td class="paramname"><em>pool_config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>pool_config_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Partition the memory into pools based on "configuration". </p>
<p>This sets the main characteristics of the pool control blocks ("size", "blocks" and "pool_end"), but does not initialise the free list or statistics collection. Acts directly on pool control blocks pointed to by static pmalloc_begin_ind </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pool_config</td><td>the pool-configuration to be used to initialise the pool-control blocks </td></tr>
    <tr><td class="paramname">pool_config_len</td><td>of pool_config</td></tr>
  </table>
  </dd>
</dl>
<p>Partition the memory into pools based on "configuration".</p>
<p>Record the total number of requests for blocks of different size Record ownership information for each of the blocks if tracing enabled Record current and high watermark of actual memory usage <br />
Partition the memory into pools based on "configuration". This sets the main characteristics of the pool control blocks ("size", "blocks" and "pool_end"), but does not initialise the free list or statistics collection. Acts directly on pool control blocks pointed to by pmalloc_begin </p>

</div>
</div>
<a id="a65eb685727275733742b580f8743f073"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65eb685727275733742b580f8743f073">&#9670;&nbsp;</a></span>prightsize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t prightsize </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Hide the myriad of debugging options in a separate file (must be included after the data structures have been declared) </p>
<p>Is a block just the right size</p>
<p>Determines whether the block containing "ptr" is the preferred size for holding a block of data of size "size".</p>
<p>For the memory block to be the preferred size it must be at least of size "size" and a block of memory taken from the next smaller pool would be smaller than "size".</p>
<p>This does not check whether any blocks of the ideal size are available.</p>
<p>Returns</p>
<p>Zero if the block is the preferred size, otherwise the size of the block.</p>
<p>Hide the myriad of debugging options in a separate file (must be included after the data structures have been declared) </p>
<p>Not a pool block if before the start of the first pool <br />
<br />
 Find which pool contains the pointer <br />
 Not a pool block if after the end of the last pool </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ae3f81af67faaa99ff0ffba5e50a25955"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3f81af67faaa99ff0ffba5e50a25955">&#9670;&nbsp;</a></span>pmalloc_app_begin</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* pmalloc_app_begin</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Address range to be used for the private memory pool, including all dynamically allocated control and tracing structures (the implementation may change for different targets, so always use the PMALLOC_ versions) </p>

</div>
</div>
<a id="a7b64024a396f762165ceb6f703e3b524"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b64024a396f762165ceb6f703e3b524">&#9670;&nbsp;</a></span>pmalloc_app_end</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* pmalloc_app_end</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a667d072910a1697eb6b81fb3a3297afe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a667d072910a1697eb6b81fb3a3297afe">&#9670;&nbsp;</a></span>pmalloc_app_size</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* pmalloc_app_size</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a616db61c3de33e4ceac9bf01de9ec1d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a616db61c3de33e4ceac9bf01de9ec1d8">&#9670;&nbsp;</a></span>pmalloc_blocks</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* pmalloc_blocks</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pointer to the first block in the first pool. </p>

</div>
</div>
<a id="a3a4950832f2f1c92d846c47e68a3cb22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a4950832f2f1c92d846c47e68a3cb22">&#9670;&nbsp;</a></span>pmalloc_num_pools</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t pmalloc_num_pools</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Array of pool control blocks. </p>
<p>This is not statically allocated because the number of pools may be configured at run-time. The control blocks must be held in order of increasing size.</p>
<p>Array of pool control blocks.</p>
<p>For unit-testing builds, this is not available and we statically allocate here, of size PMALLOC_RAM_SIZE Note: if NO_PMALLOC_MEMMAP_SYMBOLS is not def'd in the build, you MUST allocate unused memory from the linker, between pmalloc_begin and pmalloc_end Array of pool control blocks </p>

</div>
</div>
<a id="a3afa3b04f478f08b744f17d648066601"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3afa3b04f478f08b744f17d648066601">&#9670;&nbsp;</a></span>pmalloc_pools</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d05/structpmalloc__pool.html">pmalloc_pool</a>* pmalloc_pools</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.14-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_9104b11b055a08855e18ab07d1360a34.html">apps_ext_adk64r_RC_CI_qcc512x_qcc302x_1908091004</a></li><li class="navelem"><a class="el" href="../../dir_19c4644e84b768df42bf93899dbb4e83.html">apps_package</a></li><li class="navelem"><a class="el" href="../../dir_e9f51238b5eab91050ba7b42263dc658.html">progfiles</a></li><li class="navelem"><a class="el" href="../../dir_86fefe393b7ca9a63838560cf4ca04cf.html">apps</a></li><li class="navelem"><a class="el" href="../../dir_240681f6dc407f95ae9103d80499b5b4.html">fw</a></li><li class="navelem"><a class="el" href="../../dir_67a3fc20251395f7d62aa73621d4d7c9.html">src</a></li><li class="navelem"><a class="el" href="../../dir_721b2a6acf65b21a05ec9c4de6b97c06.html">core</a></li><li class="navelem"><a class="el" href="../../dir_0da8a660aff89227330b85a345295ee7.html">pmalloc</a></li><li class="navelem"><a class="el" href="../../d6/d9d/pmalloc__private_8h.html">pmalloc_private.h</a></li>
    <li class="footer">Copyright (c) 2019 Qualcomm Technologies International, Ltd. Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
