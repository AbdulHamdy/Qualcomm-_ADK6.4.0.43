<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OS: dorm_kalimba.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OS
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d9/d2c/dorm__kalimba_8c.html','../../');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">dorm_kalimba.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../dd/d94/dorm__private_8h_source.html">dorm/dorm_private.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/d7e/int_8h_source.html">int/int.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d9/dd2/pl__timers_8h_source.html">pl_timers/pl_timers.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d9b/sched__oxygen_8h_source.html">sched_oxygen/sched_oxygen.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/da7/assert_8h_source.html">assert.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d9/d24/ipc_8h_source.html">ipc/ipc.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/df1/mmu_8h_source.html">mmu/mmu.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/d7d/hal__cross__cpu__registers_8h_source.html">hal/hal_cross_cpu_registers.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a3b8d5ae234b46aaa432d922322c9e9fd"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d2c/dorm__kalimba_8c.html#a3b8d5ae234b46aaa432d922322c9e9fd">best_case_sleep</a> { <a class="el" href="../../d9/d2c/dorm__kalimba_8c.html#a3b8d5ae234b46aaa432d922322c9e9fda10304a17701ba429b23720be0028309a">best_case_no_sleep</a>, 
<a class="el" href="../../d9/d2c/dorm__kalimba_8c.html#a3b8d5ae234b46aaa432d922322c9e9fda7a5926c5e724b3f52d42d65a72c058b1">best_case_shallow_sleep</a>, 
<a class="el" href="../../d9/d2c/dorm__kalimba_8c.html#a3b8d5ae234b46aaa432d922322c9e9fdae0febd85c560d0f4749b9c7f56a26391">best_case_deep_sleep</a>
 }</td></tr>
<tr class="separator:a3b8d5ae234b46aaa432d922322c9e9fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a037d9fd7379932d7bafa479f9dfbeaf9"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../d9/d2c/dorm__kalimba_8c.html#a3b8d5ae234b46aaa432d922322c9e9fd">best_case_sleep</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d2c/dorm__kalimba_8c.html#a037d9fd7379932d7bafa479f9dfbeaf9">sleep_depth_to_consider</a> (void)</td></tr>
<tr class="memdesc:a037d9fd7379932d7bafa479f9dfbeaf9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decides which sleep level apps should consider.  <a href="#a037d9fd7379932d7bafa479f9dfbeaf9">More...</a><br /></td></tr>
<tr class="separator:a037d9fd7379932d7bafa479f9dfbeaf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b36e2c5e9c4cbf3e8a9faf2db837750"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d2c/dorm__kalimba_8c.html#a4b36e2c5e9c4cbf3e8a9faf2db837750">is_worth_deep_sleeping</a> (<a class="el" href="../../d5/dd3/rtime__types_8h.html#afc21bac5ad596b618b484908da356c0c">TIME</a> latest, bool deadline)</td></tr>
<tr class="memdesc:a4b36e2c5e9c4cbf3e8a9faf2db837750"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given that we could deep sleep, is it worth it?  <a href="#a4b36e2c5e9c4cbf3e8a9faf2db837750">More...</a><br /></td></tr>
<tr class="separator:a4b36e2c5e9c4cbf3e8a9faf2db837750"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e10ae9d988e12469520bde5020d9a0c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d2c/dorm__kalimba_8c.html#a0e10ae9d988e12469520bde5020d9a0c">safe_enable_deep_sleep</a> (<a class="el" href="../../d5/dd3/rtime__types_8h.html#afc21bac5ad596b618b484908da356c0c">TIME</a> earliest, <a class="el" href="../../d5/dd3/rtime__types_8h.html#afc21bac5ad596b618b484908da356c0c">TIME</a> latest, bool deadline)</td></tr>
<tr class="memdesc:a0e10ae9d988e12469520bde5020d9a0c"><td class="mdescLeft">&#160;</td><td class="mdescRight">P1 sleep procedure P1 delegates P0 for any deep sleep communication to curator.  <a href="#a0e10ae9d988e12469520bde5020d9a0c">More...</a><br /></td></tr>
<tr class="separator:a0e10ae9d988e12469520bde5020d9a0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76b51e91ff37389634254e971dfd9782"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d2c/dorm__kalimba_8c.html#a76b51e91ff37389634254e971dfd9782">init_dorm</a> (void)</td></tr>
<tr class="memdesc:a76b51e91ff37389634254e971dfd9782"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise the subsystem.  <a href="#a76b51e91ff37389634254e971dfd9782">More...</a><br /></td></tr>
<tr class="separator:a76b51e91ff37389634254e971dfd9782"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41f9fed18aaf0f63a9e25a22f27a1862"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d2c/dorm__kalimba_8c.html#a41f9fed18aaf0f63a9e25a22f27a1862">dorm_sleep_sched</a> (void)</td></tr>
<tr class="memdesc:a41f9fed18aaf0f63a9e25a22f27a1862"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main entry point for when the processor background is idle.  <a href="#a41f9fed18aaf0f63a9e25a22f27a1862">More...</a><br /></td></tr>
<tr class="separator:a41f9fed18aaf0f63a9e25a22f27a1862"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1227c98298db491db6e6c22b2fb1dd31"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d2c/dorm__kalimba_8c.html#a1227c98298db491db6e6c22b2fb1dd31">dorm_shallow_sleep</a> (<a class="el" href="../../d5/dd3/rtime__types_8h.html#afc21bac5ad596b618b484908da356c0c">TIME</a> latest)</td></tr>
<tr class="memdesc:a1227c98298db491db6e6c22b2fb1dd31"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enter shallow sleep unless this has been disabled.  <a href="#a1227c98298db491db6e6c22b2fb1dd31">More...</a><br /></td></tr>
<tr class="separator:a1227c98298db491db6e6c22b2fb1dd31"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a3b8d5ae234b46aaa432d922322c9e9fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b8d5ae234b46aaa432d922322c9e9fd">&#9670;&nbsp;</a></span>best_case_sleep</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d9/d2c/dorm__kalimba_8c.html#a3b8d5ae234b46aaa432d922322c9e9fd">best_case_sleep</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a3b8d5ae234b46aaa432d922322c9e9fda10304a17701ba429b23720be0028309a"></a>best_case_no_sleep&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a3b8d5ae234b46aaa432d922322c9e9fda7a5926c5e724b3f52d42d65a72c058b1"></a>best_case_shallow_sleep&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a3b8d5ae234b46aaa432d922322c9e9fdae0febd85c560d0f4749b9c7f56a26391"></a>best_case_deep_sleep&#160;</td><td class="fielddoc"></td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a1227c98298db491db6e6c22b2fb1dd31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1227c98298db491db6e6c22b2fb1dd31">&#9670;&nbsp;</a></span>dorm_shallow_sleep()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dorm_shallow_sleep </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dd3/rtime__types_8h.html#afc21bac5ad596b618b484908da356c0c">TIME</a>&#160;</td>
          <td class="paramname"><em>latest</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enter shallow sleep unless this has been disabled. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">latest</td><td>Latest time at which to wake up. This is currently ignored.</td></tr>
  </table>
  </dd>
</dl>
<p>The function will return early as soon as it detects a pending background interrupt. </p>

</div>
</div>
<a id="a41f9fed18aaf0f63a9e25a22f27a1862"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41f9fed18aaf0f63a9e25a22f27a1862">&#9670;&nbsp;</a></span>dorm_sleep_sched()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dorm_sleep_sched </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main entry point for when the processor background is idle. </p>
<p>Sleep until the scheduler wants to wake up.</p>

</div>
</div>
<a id="a76b51e91ff37389634254e971dfd9782"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76b51e91ff37389634254e971dfd9782">&#9670;&nbsp;</a></span>init_dorm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void init_dorm </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialise the subsystem. </p>
<p>This must be called before any use if made of the other functions in this library. It does not perform software configuration, only sets up some low level values. </p>

</div>
</div>
<a id="a4b36e2c5e9c4cbf3e8a9faf2db837750"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b36e2c5e9c4cbf3e8a9faf2db837750">&#9670;&nbsp;</a></span>is_worth_deep_sleeping()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool is_worth_deep_sleeping </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dd3/rtime__types_8h.html#afc21bac5ad596b618b484908da356c0c">TIME</a>&#160;</td>
          <td class="paramname"><em>latest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>deadline</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Given that we could deep sleep, is it worth it? </p>
<dl class="section note"><dt>Note</dt><dd>This completes the tests for deep sleep started in <a class="el" href="../../d9/d2c/dorm__kalimba_8c.html#a037d9fd7379932d7bafa479f9dfbeaf9" title="Decides which sleep level apps should consider. ">sleep_depth_to_consider()</a>. You must call that function before this one and proceed to this one only if that function returns best_case_deep_sleep. If you want both in one go then call should_deep_sleep();</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>TRUE if we should proceed with deep sleeping, FALSE if it's not worth it. </dd></dl>

</div>
</div>
<a id="a0e10ae9d988e12469520bde5020d9a0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e10ae9d988e12469520bde5020d9a0c">&#9670;&nbsp;</a></span>safe_enable_deep_sleep()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void safe_enable_deep_sleep </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dd3/rtime__types_8h.html#afc21bac5ad596b618b484908da356c0c">TIME</a>&#160;</td>
          <td class="paramname"><em>earliest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/dd3/rtime__types_8h.html#afc21bac5ad596b618b484908da356c0c">TIME</a>&#160;</td>
          <td class="paramname"><em>latest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>deadline</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>P1 sleep procedure P1 delegates P0 for any deep sleep communication to curator. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">earliest</td><td>the earliest time P1'd like to be woken. Will be ignored if deadline parameter is set to FALSE. </td></tr>
    <tr><td class="paramname">latest</td><td>the deadline by which P1 must be woken. Will be ignored if deadline parameter is set to FALSE. </td></tr>
    <tr><td class="paramname">deadline</td><td>TRUE if deep sleep has been requested with deadline, FALSE otherwise. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a037d9fd7379932d7bafa479f9dfbeaf9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a037d9fd7379932d7bafa479f9dfbeaf9">&#9670;&nbsp;</a></span>sleep_depth_to_consider()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../d9/d2c/dorm__kalimba_8c.html#a3b8d5ae234b46aaa432d922322c9e9fd">best_case_sleep</a> sleep_depth_to_consider </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Decides which sleep level apps should consider. </p>
<dl class="section note"><dt>Note</dt><dd>The point of this function is to allow us to short-circuit expensive calculations. Hence this should include only really cheap tests. Test should be ordered to have the test with the average least cost first. If this function says that deep sleep is worth considering the you still need to call <a class="el" href="../../d9/d2c/dorm__kalimba_8c.html#a4b36e2c5e9c4cbf3e8a9faf2db837750" title="Given that we could deep sleep, is it worth it? ">is_worth_deep_sleeping()</a> which can do the expensive tests. If you want both then call should_deep_sleep().</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>best_case_no_sleep if we're not allowed to sleep at all, best_case_shallow_sleep if we're definitely not allowed to deep sleep or best_case_deep_sleep if deep sleep is a possibility. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.14-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_9104b11b055a08855e18ab07d1360a34.html">apps_ext_adk64r_RC_CI_qcc512x_qcc302x_1908091004</a></li><li class="navelem"><a class="el" href="../../dir_19c4644e84b768df42bf93899dbb4e83.html">apps_package</a></li><li class="navelem"><a class="el" href="../../dir_e9f51238b5eab91050ba7b42263dc658.html">progfiles</a></li><li class="navelem"><a class="el" href="../../dir_86fefe393b7ca9a63838560cf4ca04cf.html">apps</a></li><li class="navelem"><a class="el" href="../../dir_240681f6dc407f95ae9103d80499b5b4.html">fw</a></li><li class="navelem"><a class="el" href="../../dir_67a3fc20251395f7d62aa73621d4d7c9.html">src</a></li><li class="navelem"><a class="el" href="../../dir_721b2a6acf65b21a05ec9c4de6b97c06.html">core</a></li><li class="navelem"><a class="el" href="../../dir_7a869d471028fb01af742c581b796427.html">dorm</a></li><li class="navelem"><a class="el" href="../../d9/d2c/dorm__kalimba_8c.html">dorm_kalimba.c</a></li>
    <li class="footer">Copyright (c) 2019 Qualcomm Technologies International, Ltd. Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
